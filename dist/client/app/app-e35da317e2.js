"use strict";function getUrlVars(){for(var e,t=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<i.length;s++)e=i[s].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function marquee(e,t,i,s){function r(){if(a>=s){n.css("top","0px"),a=0;var e=$(t).children()[0].innerHTML;n.children()[0].remove(),n.append("<li>"+e+"</li>")}else a+=1,n.css("top",-a+"px")}var n=(document.getElementById(e).offsetHeight,$(t)),a=0;setInterval(r,i)}var debugWx=!1,hostname=window.location.hostname.split("."),token="",req=new XMLHttpRequest;req.open("GET","/config",!1),req.send(null);var response=JSON.parse(req.responseText),api=response.api;debugWx=!1;var code=getUrlVars().code;code&&(req.open("GET",api.uri+"/wechat/token?code="+code,!1),req.setRequestHeader("X-API-From",api.from),req.setRequestHeader("X-Component",api.component),req.send(null),token=JSON.parse(req.responseText).token),angular.module("clientApp",["clientApp.constants","ngCookies","ngResource","ngSanitize","ngAnimate","ngTouch","ui.router","ui.bootstrap","restangular","angularMoment","infinite-scroll","currencyFilter","ngTouch","angular-carousel","timer","monospaced.elastic","ngHolder","swipe","angularCSS"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$logProvider","RestangularProvider","$cssProvider",function(e,t,i,s,r,n,a){angular.extend(a.defaults,{preload:!0}),t.otherwise("/"),i.html5Mode(!0),s.defaults.useXDomain=!0,delete s.defaults.headers.common["X-Requested-With"],r.debugEnabled("disable")}]).run(["appConfig","$rootScope","$cookieStore","$state","$stateParams","$location","Restangular","RestWechat","Wechat","Alert",function(e,t,i,s,r,n,a,o,d,l){t.appConfig=window.SONGNI_CFG_API=e;var c=e.apiUri[n.host()];!c&&(c=e.uri),a.setBaseUrl(c+"/api"),a.setErrorInterceptor(function(e,t,s){401===e.status&&(i.remove("token"),o.one("client").get().then(function(e){location.href=e.link}))}),a.addResponseInterceptor(function(e,t,s,r,n,a){return 205===n.status&&(i.remove("token"),l.add("warning","刷新重新加载本地内容！"),location.reload()),e});var p={"X-API-From":api.from,"X-Component":api.component};a.setDefaultHeaders(p),token&&i.put("token",token),i.get("token")&&(p.Authorization=i.get("token"),a.setDefaultHeaders(p),o.one("userinfo").get().then(function(e){console.warn(e),t.user=e})),a.one("merchant").get().then(function(e){t.merchant=e}),t.$on("$stateChangeStart",function(e,r,n,a,d){t.referer=s.href(a.name,d),r.authenticate&&!i.get("token")&&(e.preventDefault(),o.one("client").get({referer:s.href(r.name,n)}).then(function(e){location.href=e.link}))}),t.$on("$stateChangeSuccess",function(e,i,r,n,a){var o=["gift.detail.share","order.detail.fillin","order.detail.fillin-one2many","order.detail.one2one-received","order.detail.one2one-address","order.detail.one2many-address"];t.referer=s.href(n.name,a),document.body.scrollTop=document.documentElement.scrollTop=0,t.isAndroid&&d.config(),o.indexOf(i.name)>=0?t.bodyStyle="bodyStyle1":t.bodyStyle="bodyStyle2"}),d.config(),wx.error(function(e){l.add("warning",e.errMsg),console.log(e.errMsg)}),t.isAndroid=navigator.userAgent.match(/Android/i),t.clientWidth=document.body.clientWidth}]),function(e,t){e.module("clientApp.constants",[]).constant("appConfig",{uri:"http://api.91songli.cc",imgUri:"https://img.91pintuan.com",phtUri:"https://photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5581117b5f225e4c401c9259",apiUri:{acd5e6e0ab2c366ea83d21c106c07912:"http://api.91songli.cc","45d904d7de17319d5c8148062b2ad308":"http://api.91songli.cc"},debug:!1,from:"client"})}(angular),angular.module("clientApp").service("Alert",["$rootScope","$timeout",function(e,t){var i={};return e.alerts=[],i.add=function(s,r,n){e.alerts.push({type:s,msg:r,close:function(){i.closeAlert(this)}}),t(function(){i.closeAlert(this)},n||3e3)},i.closeAlert=function(t){i.closeAlertIdx(e.alerts.indexOf(t))},i.closeAlertIdx=function(t){e.alerts.splice(t,1)},i}]),angular.module("clientApp").directive("targetForAndroid",function(){return{restrict:"A",link:function(e,t,i){t.href;navigator.userAgent.match(/Android/i)&&t.attr("target","_self")}}}),angular.module("clientApp").filter("nl2br",["$sce",function(e){return function(t,i){var i=i||!0,s=i?"<br />":"<br>",t=(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+s+"$2");return e.trustAsHtml(t)}}]),angular.module("clientApp").directive("onLongPress",["$timeout","$parse",function(e,t){return{restrict:"A",link:function(i,s,r){s.bind("touchstart",function(s){i.longPress=!0;var n=t(r.onLongPress);e(function(){i.longPress&&i.$apply(function(){n(i,{$event:s})})},600)}),s.bind("touchend",function(e){i.longPress=!1;var s=t(r.onLongPress);r.onTouchEnd&&i.$apply(function(){s(i,{$event:e})})})}}}]),angular.module("clientApp").directive("phone",function(){return{require:"ngModel",link:function(e,t,i,s){s.$parsers.unshift(function(e){var t=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])[0-9]{8}$/;return t.test(e)?(s.$setValidity("phone",!0),e):void s.$setValidity("phone",!1)})}}}),angular.module("clientApp").controller("GiftCtrl",["$scope","$rootScope",function(e,t){e.title="大礼包",t.bg2=!1,t.hideBar=!0}]).controller("GiftListCtrl",["$scope","$rootScope","$state","Gift",function(e,t,i,s){t.bg2=!1,console.warn(t.clientWidth+"px !important"),e.apiCfg=window.SONGNI_CFG_API,e.gifts=new s,e.link=function(){var e=this.gift.id;i.go("gift.detail",{id:e})},wx.ready(function(){var e="http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",i={title:t.merchant.info.name+"的礼物货架",link:window.location.href,imgUrl:e},s={title:"会说话的礼物",desc:t.merchant.info.name+"的礼物货架",link:window.location.href,imgUrl:e};wx.onMenuShareTimeline(i),wx.onMenuShareAppMessage(s),wx.onMenuShareQQ(s),wx.onMenuShareWeibo(s)})}]).controller("GiftDetailCtrl",["$scope","$rootScope","$state","$sce","gift","Alert",function(e,t,i,s,r,n){console.warn("!!!!!!"),e.appid=hostname[0],e.apiCfg=window.SONGNI_CFG_API,r.info.name&&(t.title=r.info.name),t.bg2=!1,e.gift=r,e.tab="gift-card",e.tabTap=function(t){e.tab=t},e.iWS=function(){i.go("gift.detail.record",{id:e.gift.id})},e.trustAsHtml=function(e){return s.trustAsHtml(e)},wx.ready(function(){var e=r.info.cover?"http://"+SONGNI_CFG_API.imgUri+r.info.cover:"http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",t={title:r.info.name,imgUrl:e},i={title:"会说话的礼物",desc:r.info.name,imgUrl:e};wx.onMenuShareTimeline(t),wx.onMenuShareAppMessage(i),wx.onMenuShareQQ(i),wx.onMenuShareWeibo(i)})}]).controller("ShareModalCtrl",["$scope","$uibModalInstance",function(e,t){e.shareSrc="https://img.91pintuan.com/songli/gift_share.png",e.isCloseModal=!1,e.$watch("isCloseModal",function(e){e&&t.close()})}]).controller("GiftShareCtrl",["$state","$scope","$rootScope","$stateParams","$uibModal","RestGiftOrder","$timeout",function(e,t,i,s,r,n,a){i.bg2=!1,n.one("list").one("s").getList("",{limit:20,gift:s.id}).then(function(e){e[1].length&&(t.orders=[],_.each(e[1],function(e){t.orders.push(e)}),marquee("marquee_content","#marquee_content",40,40))}),t.shareSrc="https://img.91pintuan.com/songli/gift_share.png",t.shareStyle={width:"50%"},t.share=function(){i.modalInstance=r.open({templateUrl:"app/gift/gift.share.modal.html",scope:t})}}]).controller("GiftOrdersCtrl",["$scope","$rootScope","$stateParams","RestGiftOrder",function(e,t,i,s){t.bg2=!0,s.one("list").one("s").getList("",{limit:10,gift:i.id}).then(function(t){e.orders=t[1];var i=(e.orders.length,0);e.empty_line=[];for(var i=0;i<3-e.orders.length;i++)e.empty_line.push(i)})}]).controller("GiftListenCtrl",["$scope","$rootScope","$state","$stateParams","$timeout","$window","RestGiftOrder","order","Alert",function(e,t,i,s,r,n,a,o,d){e.innerHeight=n.innerHeight,e.innerWidth=n.innerWidth,i.is("order.detail.info"),t.bg2=!0,e.order=o,e.status={downloading:!1,downloaded:!1,play:!1,pause:!1,stop:!1},a.one(s.id).one("media").get({from:s.from}).then(function(t){e.media=t})["catch"](function(e){console.error(e)}),e.play=function(){wx.downloadVoice({serverId:e.media.media_id,isShowProgressTips:1,success:function(t){e.localId=t.localId,e.status.play=!0,e.status.pause=!1,wx.playVoice({localId:t.localId,success:function(t){e.$broadcast("timer-start")}}),e.pause=function(){wx.pauseVoice({localId:t.localId,success:function(t){e.$broadcast("timer-stop"),e.status.play=!1,e.status.pause=!0,e.$apply()}})},e.resume=function(){wx.playVoice({localId:t.localId,success:function(t){e.$broadcast("timer-start"),e.status.play=!0,e.status.pause=!1,e.$apply()}})},e.stop=function(){wx.stopVoice({localId:t.localId}),e.$broadcast("timer-stop"),e.$broadcast("timer-set-countdown",60)},e.$apply()}}),wx.ready(function(){wx.onVoicePlayEnd({success:function(t){e.$broadcast("timer-set-countdown",60),e.$broadcast("timer-stop"),e.status.play=!1,e.status.pause=!0,e.status.stop=!0,e.$apply()}})})},e.link=function(){i.go("gift.detail.share",{id:o.gift.id})}}]).controller("GiftQrcodeCtrl",["$scope","$rootScope",function(e,t){}]).controller("GiftAudioCtrl",["$scope","ngAudio",function(e,t){e.audio=t.load("http://media.songni.cc/2015-7/JBDl12DpTjFIZFg3OCl7-529Aaqj7UHsXVBsfEAW9Cxtgo8UekdyrVxT9FizKcW2.amr")}]).controller("GiftGuideCtrl",["$scope","$rootScope","$stateParams","$window",function(e,t,i,s){t.bg2=!0,e.selection=0,e.innerHeight=s.innerHeight,e.innerWidth=s.innerWidth,e.swipe=function(t){"up"===t&&e.selection<2&&e.selection++,"down"===t&&e.selection>0&&e.selection--},e.items=[0,1,2],e.selection=e.items[0]}]),angular.module("clientApp").config(["$stateProvider",function(e){e.state("gift",{"abstract":!0,url:"/gift",template:"<ui-view/>"}).state("gift.list",{url:"/list",templateUrl:"app/gift/gift.lists.html",controller:"GiftListCtrl"}).state("gift.my",{url:"/my",templateUrl:"app/gift/orderlist/order.list.html",controller:"GiftMyCtrl"}).state("gift.listen",{url:"/listen/:id?from",templateUrl:"app/gift/gift.listen.html",controller:"GiftListenCtrl",resolve:{order:["$stateParams","RestGiftOrder",function(e,t){return t.one(e.id).one("detail").get({from:e.from})}]}}).state("gift.audio",{url:"/audio",templateUrl:"app/gift/gift.audio.html",controller:"GiftAudioCtrl"}).state("gift.detail",{url:"/:id",templateUrl:"app/gift/gift.detail.html",controller:"GiftDetailCtrl",resolve:{gift:["$state","$stateParams","$location","RestGift","Wechat","Alert",function t(e,i,s,r,n,a){var t=r.one(i.id).get(),o=window.SONGNI_CFG_API;return t.then(function(e){var t="http://"+s.host()+"/gift/"+e.id,i=e.info.name,r=e.info.lead,d=i,l="http://"+o.imgUri+e.info.cover;n.ready({url:t,title:i,desc:r,timeline:d,img:l}),e.status.online===!1&&a.add("danger","该礼物已下架!")}),t}]}}).state("gift.detail.one2one-record",{url:"/one2one-record",templateUrl:"app/gift/order/one2one/record.html",controller:"GiftRecordSingleCtrl",authenticate:!0}).state("gift.detail.one2many-record",{url:"/one2many-record",templateUrl:"app/gift/order/one2many/record.html",controller:"GiftRecordMultiCtrl",authenticate:!0}).state("gift.detail.share",{url:"/share?from",templateUrl:"app/gift/gift.share.html",controller:"GiftShareCtrl"}).state("gift.detail.orders",{url:"/orders",templateUrl:"app/gift/gift.orders.html",controller:"GiftOrdersCtrl"}).state("gift.detail.qrcode",{url:"/qrcode",templateUrl:"app/gift/gift.qrcode.html",controller:"GiftShareCtrl",authenticate:!0}).state("order",{"abstract":!0,url:"/order",template:"<ui-view/>"}).state("order.list",{url:"/list",templateUrl:"app/gift/orderlist/order.list.html",controller:"GiftMyCtrl"}).state("order.detail",{url:"/:id?from",template:"<ui-view/>","abstract":!0,resolve:{order:["$stateParams","RestGiftOrder",function(e,t){return t.one(e.id).one("detail").get({from:e.from})}]}}).state("order.detail.go",{url:"/go",controller:["$scope","$state","order",function(e,t,i){location.href=t.href("order.detail.info",{id:i.id})}]}).state("order.detail.one2one-address",{url:"/one2one-address",templateUrl:"app/gift/order/one2one/address.html",controller:"OrderAddressOne2OneCtrl",authenticate:!0}).state("order.detail.one2many-address",{url:"/one2many-address",templateUrl:"app/gift/order/one2many/address.html",controller:"OrderAddressOne2ManySendCtrl",authenticate:!0}).state("order.detail.guide",{url:"/guide",templateUrl:"app/gift/address.guide.html",controller:"OrderAddressCtrl",authenticate:!0}).state("order.detail.fillin",{url:"/fillin",templateUrl:"app/gift/order/gift.receive.status.html",controllerProvider:["order",function(e){return 1==e.capacity?"OrderAddressOne2OneCtrl":"OrderAddressOne2ManyRecevCtrl"}],authenticate:!0}).state("order.detail.fillin-one2many",{url:"/fillin-one2many",templateUrl:"app/gift/order/one2many/address.fillin.html",controller:"OrderAddressOne2ManyRecevAddrCtrl"}).state("order.detail.info",{url:"/info",templateUrl:"app/gift/orderlist/order.info.html",controller:"GiftOrderDetailCtrl",authenticate:!0}).state("order.detail.received",{url:"/received",templateUrl:"app/gift/orderlist/order.received.html",controller:"GiftReceivedCtrl",authenticate:!0}).state("order.detail.shipped",{url:"/shipped",templateUrl:"app/gift/orderlist/order.shipped.html",controller:"GiftShippedCtrl",authenticate:!0}).state("order.detail.listened",{url:"/listened",templateUrl:"app/gift/orderlist/order.listened.html",controller:"GiftListenedCtrl",authenticate:!0}).state("order.detail.listen",{url:"/listen",templateUrl:"app/gift/gift.listen.html",controller:"GiftListenCtrl",authenticate:!0}).state("guide",{url:"/guide?id",templateUrl:"app/gift/gift.guide.html",controller:"GiftGuideCtrl"}).state("test",{url:"/test",templateUrl:"app/gift/test.html",controller:"TestCtrl"})}]),angular.module("clientApp").service("RestGift",["Restangular",function(e){return e.service("gift")}]).service("RestGiftOrder",["Restangular",function(e){return e.service("gift/order")}]).factory("Gift",["RestGift",function(e){var t=function(e){this.items=[],this.busy=!1,this.page=1,this.limit=10,this.params=e||{}};return t.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var t={page:this.page,limit:this.limit};this.params.tips&&(t.tips=!0),e.getList(t).then(function(e){for(var e=e[1],t=0;t<e.length;t++)this.items.push(e[t]);return e.length<this.limit?void(this.busy=!0):(this.page++,void(this.busy=!1))}.bind(this))}},t}]).factory("GiftOrder",["RestGiftOrder",function(e){var t=function(e){this.items=[],this.busy=!1,this.page=1,this.limit=10,this.count=0,this.params=e||{}};return t.prototype.nextPage=function(){this.busy||(this.busy=!0,this.params.page=this.page,this.params.limit=this.limit,e.one("list").one("s").getList("",this.params).then(function(e){this.count=e[0];for(var t=e[1],i=0;i<t.length;i++)this.items.push(t[i]);return t.length<this.limit?void(this.busy=!0):(this.page++,void(this.busy=!1))}.bind(this)))},t}]),angular.module("clientApp").controller("GiftRecordMultiCtrl",["$scope","$rootScope","$state","$cookies","$timeout","$uibModal","$window","Alert",function(e,t,i,s,r,n,a,o){e.innerHeight=a.innerHeight,t.moreRecode={background:"#F2F2F2"},t.bg2=!0,e.giftOrderCapacity=null,e.address={name:""},e.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0,isAlert:!0},e.$on("timer-stopped",function(e,t){console.log("Timer Stopped - data = ",t)}),wx.ready(function(){e.reduCapacity=function(){e.giftOrderCapacity&&e.giftOrderCapacity>2?e.giftOrderCapacity-=1:2==e.giftOrderCapacity&&o.add("warning","礼物份数至少是2份",2e3)},e.incrCapacity=function(){null==e.giftOrderCapacity?e.giftOrderCapacity=3:e.giftOrderCapacity>0&&(e.giftOrderCapacity+=1)},e.record=function(){e.$broadcast("timer-set-countdown",60),wx.startRecord({success:function(t){e.status.start=!0,e.status.stop=!1,e.status.record=!1,e.$broadcast("timer-start"),e.$apply()}})},e.stop=function(){wx.stopRecord({success:function(t){e.localId=t.localId,e.status.start=!1,e.status.record=!0,e.$broadcast("timer-stop"),e.$apply()}})},e.playVoice=function(){return e.$broadcast("timer-set-countdown",60),t.isAndroid&&e.status.isAlert?(n.open({templateUrl:"app/gift/gift.headphones.modal.html",controller:["$scope","$uibModalInstance",function(e,t){e.close=function(){t.dismiss("cancel")}}],size:"sm"}),e.status.isAlert=!1,void e.$apply()):void wx.playVoice({localId:e.localId,success:function(){e.$broadcast("timer-start"),e.$apply()}})},e.rerecord=function(){e.$broadcast("timer-reset"),e.$broadcast("timer-set-countdown",60),e.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0}},e.save=function(){return e.giftOrderCapacity&&e.giftOrderCapacity<2?void o.add("warning","礼物份数至少是2份",2e3):void wx.uploadVoice({localId:e.localId,isShowProgressTips:1,success:function(t){e.serverId=t.serverId;var r=s.getObject("giftOrder")||{};r.serverId=t.serverId,r.name=e.address.name,r.capacity=e.giftOrderCapacity||2,r.type="one2many",s.putObject("giftOrder",r);var n=i.href("wepay",{module:"gift",type:r.type,action:"pay",block:"order",id:e.gift.id,showwxpaytitle:1});location.href=n}})},wx.onVoiceRecordEnd({complete:function(t){e.localId=t.localId,e.status.start=!1,e.status.record=!0,e.$apply()}}),wx.onVoicePlayEnd({success:function(t){e.$broadcast("timer-set-countdown",60),e.$broadcast("timer-stop"),e.$apply()}})})}]).controller("GiftPayOne2ManyCtrl",["$scope","$rootScope","$window","$state","$stateParams","$cookies","$timeout","RestGift","Alert","$css",function(e,t,i,s,r,n,a,o,d,l){var c=(r.module,r.action,r.id);r.block;e.gift=o.one(c).get().$object,e.capacity=n.getObject("giftOrder").capacity,e.submiting=!1,e.wxPay=function(){var t=n.getObject("giftOrder");e.submiting=!0,a(function(){e.submiting=!1},5e3),o.one(c).one("preorder").post("",t).then(function(t){wx.chooseWXPay({timestamp:t.timestamp,nonceStr:t.nonceStr,"package":t["package"],signType:t.signType,paySign:t.paySign,success:function(e){var i=s.href(t.state,{id:t.id});location.href=i},cancel:function(t){e.submiting=!1},fail:function(t){e.submiting=!1,d.add("warning",t.errMsg)}})},function(e){d.add("danger",e.data.errmsg)})}}]).controller("OrderAddressOne2ManySendCtrl",["$scope","$rootScope","$state","$cookies","Wechat","$location","order","$uibModal",function(e,t,i,s,r,n,a,o){t.bg2=!1,t.hideBar=!0,e.order=a,e.address={},e.user=t.user;var d="http://"+n.host()+i.href("order.detail.fillin",{id:a.id}),l=a.sender.name+"送给你一份礼物，快快收礼吧～",c="会说话的礼物",p=a.gift.info.cover?"http://"+SONGNI_CFG_API.imgUri+a.gift.info.cover:"http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",g=l+","+c;r.ready({url:d,title:l,desc:c,timeline:g,img:p,state:"gift.detail.share",params:{id:e.order.gift.id}}),e.share=function(){t.modalInstance=o.open({templateUrl:"app/gift/gift.share.modal.html",controller:"ShareModalCtrl"})}}]).controller("OrderAddressOne2ManyRecevCtrl",["$scope","$rootScope","$state","$stateParams","$cookies","Wechat","RestWechat","$location","order","$uibModal",function(e,t,i,s,r,n,a,o,d,l){function c(){var t=0,i=1,s=10,r=100;e.isAvailble&&(t=i),e.isReceived&&(t+=s),e.isSender&&(t+=r),e.orderStatus=t}if(e.order=d,e.user=t.user,void 0===e.user&&a.one("client").get({referer:i.href("order.detail.fillin",s)}).then(function(e){window.location.href=e.link}),t.user.id===(d.sender.id||d.sender._id))return void i.go("order.detail.one2many-address",null,{location:"replace"});t.bg2=!1,t.hideBar=!0,e.address={},e.isReceived=!1,e.isAvailble=!0,e.isSender=!1,e.orderStatus=0,e.user.id===d.sender.id&&(e.isSender=!0),_.some(d.receivers,function(e){return e.userOpenId==t.user.openid})&&(e.isReceived=!0),e.orderReserved=d.receivers.length,e.orderSurplus=d.capacity-d.receivers.length,0===e.orderSurplus&&(e.isAvailble=!1),e.fill=function(){if(e.isAndroid){var t=i.href("order.detail.fillin-one2many",{id:e.order.id});location.href=t}else i.go("order.detail.fillin-one2many",{id:e.order.id})},c();var p="http://"+o.host()+i.href("order.detail.fillin",{id:d.id}),g=d.sender.name+"送给你一份礼物，快快收礼吧～",m="会说话的礼物",u=d.gift.info.cover?"http://"+SONGNI_CFG_API.imgUri+d.gift.info.cover:"http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",f=g+","+m;n.ready({url:p,title:g,desc:m,timeline:f,img:u,state:"gift.detail.share",params:{id:e.order.gift.id}}),e.shareAsSender=function(){t.modalInstance=l.open({templateUrl:"app/gift/gift.share.modal.html",controller:"ShareModalCtrl"})}}]).controller("OrderAddressOne2ManyRecevAddrCtrl",["$scope","$rootScope","$state","$cookies","Wechat","$location","order","Alert","RestGiftOrder",function(e,t,i,s,r,n,a,o,d){t.bg2=!1,t.hideBar=!0,e.addressFriendForm={},e.data={consignee:"",telephone:"",address:""},e.saveAddr=function(){return e.addressFriendForm.$invalid?(e.submitted=!0,!1):(o.add("success","领取成功等待收礼吧！",2e3),void d.one(a.id).one("address").post("",e.data).then(function(e){switch(e.rc||console.error("saveAddr","没有response code !"),e.rc){case 1:o.add("success","你已经保存该礼物了",2e3);break;case 2:o.add("success","手慢了，没有礼物了",2e3);break;case 3:o.add("success","信息不全",2e3);break;case 4:location.href=i.href("gift.detail.share",{id:a.gift.id});break;default:o.add("warning","服务器走神了",2e3)}},function(e){console.log("Get an err, "+JSON.stringify(e))}))}}]),angular.module("clientApp").controller("GiftRecordSingleCtrl",["$scope","$rootScope","$state","$cookies","$timeout","$uibModal","$window","Alert",function(e,t,i,s,r,n,a,o){e.innerHeight=a.innerHeight,t.bg2=!0,e.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0,isAlert:!0},e.$on("timer-stopped",function(e,t){console.log("Timer Stopped - data = ",t)}),wx.ready(function(){e.record=function(){e.$broadcast("timer-set-countdown",60),wx.startRecord({success:function(t){e.status.start=!0,e.status.stop=!1,e.status.record=!1,e.$broadcast("timer-start"),e.$apply()}})},e.stop=function(){wx.stopRecord({success:function(t){e.localId=t.localId,e.status.start=!1,e.status.record=!0,e.$broadcast("timer-stop"),e.$apply()}})},e.playVoice=function(){return e.$broadcast("timer-set-countdown",60),t.isAndroid&&e.status.isAlert?(n.open({templateUrl:"app/gift/gift.headphones.modal.html",controller:["$scope","$uibModalInstance",function(e,t){e.close=function(){t.dismiss("cancel")}}],size:"sm"}),e.status.isAlert=!1,void e.$apply()):void wx.playVoice({localId:e.localId,success:function(){e.$broadcast("timer-start"),e.$apply()}})},e.rerecord=function(){e.$broadcast("timer-reset"),e.$broadcast("timer-set-countdown",60),e.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0}},e.save=function(){return e.giftAddrForm.$invalid?(e.submitted=!0,!1):void wx.uploadVoice({localId:e.localId,isShowProgressTips:1,success:function(t){e.serverId=t.serverId;var r=s.getObject("giftOrder")||{};r.serverId=t.serverId,r.name=e.address.name,r.capacity=1,r.type="one2one",s.putObject("giftOrder",r);var n=i.href("wepay",{module:"gift",type:"one2one",action:"pay",block:"order",id:e.gift.id,showwxpaytitle:1});location.href=n}})},wx.onVoiceRecordEnd({complete:function(t){e.localId=t.localId,e.status.start=!1,e.status.record=!0,e.$apply()}}),wx.onVoicePlayEnd({success:function(t){e.$broadcast("timer-set-countdown",60),e.$broadcast("timer-stop"),e.$apply()}})})}]).controller("GiftPayOne2OneCtrl",["$scope","$rootScope","$window","$state","$stateParams","$cookies","$timeout","RestGift","Alert","$css",function(e,t,i,s,r,n,a,o,d,l){var c=(r.module,r.action,r.id);e.gift=o.one(c).get().$object,e.capacity=n.getObject("giftOrder").capacity,e.submiting=!1,e.wxPay=function(){var t=n.getObject("giftOrder");e.submiting=!0,a(function(){e.submiting=!1},5e3),o.one(c).one("preorder").post("",t).then(function(t){wx.chooseWXPay({timestamp:t.timestamp,nonceStr:t.nonceStr,"package":t["package"],signType:t.signType,paySign:t.paySign,success:function(e){var i=s.href(t.state,{id:t.id});location.href=i},cancel:function(t){e.submiting=!1},fail:function(t){e.submiting=!1,d.add("warning",t.errMsg)}})},function(e){d.add("danger",e.data.errmsg)})}}]).controller("OrderReceivedOne2OneCtrl",["$timeout","$scope","$rootScope","$location","$state","$uibModal","$window","RestGiftOrder","Wechat","order","Alert",function(e,t,i,s,r,n,a,o,d,l,c){t.order=l,t.receiver=l.receivers[0]}]).controller("OrderAddressOne2OneCtrl",["$timeout","$scope","$rootScope","$location","$state","$uibModal","$window","RestGiftOrder","Wechat","order","Alert",function(e,t,i,s,r,n,a,o,d,l,c){if(1==l.capacity&&1==l.receivers.length){if(l.receivers[0].telephone)return void(t.order=l)}else c.add("warning","路径错误，此处为一送一！");t.innerHeight=a.innerHeight,i.bg2=!1,t.giftAddrForm={},t.order=l,t.address={consignee:l.receivers[0]?l.receivers[0].name:"",address:null,telephone:null},t.saveAddr=function(){return console.log(t.giftAddrForm),t.giftAddrForm.$invalid?(t.submitted=!0,!1):void o.one(l.id).one("address").post("",t.address).then(function(e){switch(e.rc||console.error("saveAddr","没有response code !"),e.rc){case 1:c.add("success","你已经保存该礼物了",2e3);break;case 2:c.add("success","手慢了，没有礼物了",2e3);break;case 3:c.add("success","信息不全",2e3);break;case 4:location.href=r.href("gift.detail.share",{id:l.gift.id});break;default:c.add("warning","服务器走神了",2e3)}},function(e){console.log("Get an err, "+JSON.stringify(e))})};var p="http://"+s.host()+r.href("order.detail.fillin",{id:l.id}),g=l.sender.name+"送给你一份礼物，快快收礼吧～",m="会说话的礼物",u=l.gift.info.cover?"http://"+SONGNI_CFG_API.imgUri+l.gift.info.cover:"http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",f=g+","+m;d.ready({url:p,title:g,desc:m,timeline:f,img:u,state:"gift.detail.share",params:{id:t.order.gift.id}}),t.share=function(){i.modalInstance=n.open({templateUrl:"app/gift/gift.share.modal.html",controller:"ShareModalCtrl"})}}]),angular.module("clientApp").controller("GiftMyCtrl",["$scope","$rootScope","$state","GiftOrder",function(e,t,i,s){t.isBody1=!0,t.isBody2=!1,e.apiCfg=window.SONGNI_CFG_API,t.bg2=!1,e.gifts=new s({my:!0}),e.link=function(e){i.go("order.detail.info",{id:e})}}]).controller("GiftOrderDetailCtrl",["$scope","$rootScope","$state","$stateParams","$timeout","$window","RestGiftOrder","order","Alert",function(e,t,i,s,r,n,a,o,d){t.isBody1=!0,t.isBody2=!1,e.innerHeight=n.innerHeight,e.innerWidth=n.innerWidth,e.apiCfg=window.SONGNI_CFG_API,t.bg2=!0,e.order=o,e.receiver=o.receivers[0],e.receive_num=o.receivers&&o.receivers.length||0,e.ship_num=o.receivers&&o.receivers.filter(function(e){return e.status.shipping}).length||0,e.listen_num=o.receivers&&o.receivers.filter(function(e){return e.status.read}).length||0;var l=o.receivers.reduce(function(e,t){return t.fillinDate?e&&e.fillinDate?moment(t.fillinDate).isAfter(e.fillinDate)?t:e:t:e},void 0);e.receivedTime=l&&l.fillinDate||"";var c=o.receivers.reduce(function(e,t){return t.status&&t.status.shipping_date?e&&e.status&&e.status.shipping_date?moment(t.status.shipping_date).isAfter(e.status.shipping_date)?t:e:t:e},void 0);e.shippedTime=c&&c.status.shipping_date||"";var p=o.receivers.reduce(function(e,t){return t.status&&t.status.read_date?e&&e.status&&e.status.read_date?moment(t.status.read_date).isAfter(e.status.read_date)?t:e:t:e},void 0);e.readTime=p&&p.status.read_date||"",e.link=function(){i.go("gift.detail.share",{id:o.gift.id})},e.received=function(){o.receivers.length&&i.go("order.detail.received",{id:o.id})},e.listened=function(){e.listen_num>0&&i.go("order.detail.listened",{id:o.id})},e.shipped=function(){e.ship_num>0&&i.go("order.detail.shipped",{id:o.id})},e.jumpToAddressCard=function(){i.go("order.detail.fillin",{id:o.id})}}]).controller("GiftShippedCtrl",["$scope","$rootScope","order",function(e,t,i){t.isBody1=!0,t.isBody2=!1;var s=[];angular.forEach(i.receivers,function(e){var t=e.status;t&&t.shipping&&s.push(e)}),alert(JSON.stringify(s[1])),e.receivers=s}]).controller("GiftListenedCtrl",["$scope","$rootScope","order",function(e,t,i){t.isBody1=!0,t.isBody2=!1;var s=[];angular.forEach(i.receivers,function(e){var t=e.status;t&&t.shipping&&t.read&&s.push(e)}),e.receivers=s}]).controller("GiftReceivedCtrl",["$scope","$rootScope","order",function(e,t,i){t.isBody1=!0,t.isBody2=!1;var s=[];angular.forEach(i.receivers,function(e){s.push(e)}),e.receivers=s}]),angular.module("clientApp").controller("LoginCtrl",["$scope","$rootScope","RestWechat",function(e,t,i){e.wechat=function(){i.one("client").get({referer:t.referer}).then(function(e){location.href=e.link})}}]).controller("ExpSetCtrl",["$cookieStore","$state","$stateParams","Alert",function(e,t,i,s){return i.token?(e.put("token",i.token),void(e.get("token")&&(location.href="/"))):void s.add("warning","请设置token")}]).controller("ExpCtrl",["$cookieStore","$stateParams","RestWechat",function(e,t,i){i.one("experience").get({uid:t.uid}).then(function(t){e.put("token",t.token),location.href="/"})}]),angular.module("clientApp").config(["$stateProvider",function(e){e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl"}).state("exp",{url:"/exp?uid",templateUrl:"app/login/login.html",controller:"ExpCtrl"})}]),angular.module("clientApp").controller("MainCtrl",["$scope","$rootScope","gifts",function(e,t,i){t.title="大礼包列表",t.hideBar=!0,e.gifts=i}]),angular.module("clientApp").config(["$stateProvider",function(e){e.state("main",{url:"/",templateUrl:"app/gift/gift.lists.html",controller:"GiftListCtrl",resolve:{gifts:["RestGift",function(e){return e.getList()}]}}).state("info",{url:"/info",templateUrl:"app/main/info.html"})}]),angular.module("clientApp").controller("WePayCtrl",["$scope","$rootScope","$window","$state","$stateParams","$timeout","$cookies","RestWechat","RestGift","Alert",function(e,t,i,s,r,n,a,o,d,l){t.title="微信支付";var c=r.module,p=r.action,g=r.id;switch(c){case"gift":switch(p){case"buy":e.gift=d.one(g).get().$object}}e.wxPay=function(){var e=function(e){wx.chooseWXPay({timestamp:e.timestamp,nonceStr:e.nonceStr,"package":e["package"],signType:e.signType,paySign:e.paySign,success:function(t){var i=s.href(e.state,{id:e.id});location.href=i},cancel:function(e){},fail:function(e){l.add("warning",e.errMsg)}})},t=function(e){l.add("danger",e.data.errmsg)};switch(c){case"gift":switch(p){case"buy":var i=a.getObject("giftOrder");d.one(g).post("",i).then(e,t)}}}}]).controller("WcAppCtrl",["$scope",function(e){var t;e.try_to_open_app=function(){t=setTimeout("open_appstore()",300)}}]),angular.module("clientApp").config(["$stateProvider",function(e){e.state("wepay",{url:"/wepay/?id&showwxpaytitle&module&block&type&action",templateUrl:function(e){var t="app/"+e.module+"/"+e.block+"/"+e.type+"/"+e.action+".html";return t},authenticate:!0}).state("weapp",{url:"/weapp",templateUrl:"app/wechat/app.html",controller:"WcAppCtrl"})}]),angular.module("clientApp").service("RestWechat",["Restangular",function(e){return e.service("wechat")}]).service("Wechat",["$rootScope","$location","$document","$state","RestWechat","Alert",function(e,t,i,s,r,n){return{params:{url:t.absUrl(),title:i[0].title,desc:this.url,img:"http://static.ifindu.cn/91pintuan/images/logo.png"},config:function(){this.params.url=this.params.url||t.absUrl(),r.one("sign").one("jssdk").get({type:"jsapi",url:this.params.url}).then(function(t){e.signature=t.signature;var i={debug:debugWx,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseWXPay","editAddress","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"]};wx.config(i)})},ready:function(t){t=t||{};var i=t.url?t.url:this.params.url,r=t.title?t.title:this.params.title,n=t.desc?t.desc:this.params.url,a=t.img?t.img:this.params.img,o={title:r,desc:n,link:i,imgUrl:a,success:function(i){e.modalInstance&&e.modalInstance.close(),t.state&&t.params&&s.go(t.state,t.params)},cancel:function(e){},fail:function(e){},complete:function(e){},trigger:function(e){}},d={title:t.timeline,link:i,imgUrl:a};wx.ready(function(){wx.onMenuShareTimeline(d),wx.onMenuShareAppMessage(o),wx.onMenuShareQQ(o),wx.onMenuShareWeibo(o)})}}}]),angular.module("clientApp").directive("iconHref",function(){function e(e,t,i){!i.theme&&(i.theme="grey"),e.theme=i.theme}return{restrict:"E",templateUrl:"components/icon-href/icon-href.html",
link:e}}),angular.module("clientApp").factory("Modal",["$rootScope","$modal",function(e,t){function i(i,s){var r=e.$new();return i=i||{},s=s||"modal-default",angular.extend(r,i),t.open({templateUrl:"components/modal/modal.html",windowClass:s,scope:r})}return{confirm:{"delete":function(e){return e=e||angular.noop,function(){var t,s=Array.prototype.slice.call(arguments),r=s.shift();t=i({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+r+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(e){t.close(e)}},{classes:"btn-default",text:"Cancel",click:function(e){t.dismiss(e)}}]}},"modal-danger"),t.result.then(function(t){e.apply(t,s)})}}}}}]),angular.module("clientApp").controller("NavbarCtrl",["$scope","$location",function(e,t){e.menu=[{title:"Home",link:"/"}],e.isCollapsed=!0,e.isActive=function(e){return e===t.path()}}]),angular.module("clientApp").run(["$templateCache",function(e){e.put("app/directive/alert.html",'<uib-alert class="pt-alert alert-warning" ng-repeat="alert in alerts" type="{{alert.type}}" close="alert.close($index)">{{alert.msg}}</uib-alert>'),e.put("app/gift/address.guide.html",'<div>{{order.receiver.name}}:</div><p>我为你准备了一份惊喜,也有些话想对你说...</p><div class="pull-right">{{order.sender.name}}</div><div class="clearfix" style="clear:both"><a ui-sref="order.detail.fillin({id:order.id})" class="button button-action btn-green">填写地址</a></div>'),e.put("app/gift/gift.address.html",'<div class="gift-address"><div>222</div><table class="gift-top" width="100%"><tr><td align="center" width="34%"><img src="{{merchant.pubno.head_img}}" class="img-responsive img-circle"></td><td valign="middle" width="66%"><div class="title">{{gift.info.name}}</div></td></tr></table><form class="form-horizontal" name="giftAddrForm" novalidate ng-submit="saveAddr()"><div class="form-group details-input" ng-class="{ \'gift-success\': giftAddrForm[\'name\'].$valid && submitted,\n                                      \'has-error\' : giftAddrForm[\'name\'].$invalid && submitted }"><label for="name" class="col-xs-4 control-label">送　　给</label><div class="col-xs-8"><input type="text" name="name" placeholder="{{giftAddrForm.name.$invalid && submitted?\'昵称未填写\':\'TA的名字\'}}" ng-model="address.name" ng-maxlength="20" required><p ng-show="giftAddrForm.name.$error.maxlength && submitted" class="help-block">昵称字数太多.</p></div></div><div class="form-group details-input" ng-class="{ \'gift-success\': giftAddrForm[\'address\'].$valid && submitted,\n                                      \'has-error\' : giftAddrForm[\'address\'].$invalid && submitted }"><label for="address" class="col-xs-4 control-label">配送地址</label><div class="col-xs-8"><textarea type="address" rows="2" name="address" placeholder="{{giftAddrForm.address.$invalid && submitted?\'配送地址未填写\':\'[送你]盒子飞奔到这里\'}}" ng-model="address.address" class="msd-elastic" required></textarea><p ng-show="giftAddrForm.address.$error.maxlength" class="help-block">配送地址字数太多.</p></div></div><div class="form-group details-input" ng-class="{ \'gift-success\': giftAddrForm[\'telephone\'].$valid && submitted,\n                                      \'has-error\' : giftAddrForm[\'telephone\'].$invalid && submitted }"><label for="telephone" class="col-xs-4 control-label">Ta的电话</label><div class="col-xs-8"><input type="number" name="telephone" placeholder="{{giftAddrForm.telephone.$invalid && submitted?\'手机号未填写\':\'TA的手机号\'}}" ng-model="address.telephone" required phone><p ng-show="giftAddrForm.telephone.$error.phone" class="help-block">不是有效的手机号码.</p></div></div><div class="form-group details-input" ng-class="{\'gift-success\':giftAddrForm[\'name\'].$valid&&giftAddrForm[\'address\'].$valid&&giftAddrForm[\'telephone\'].$valid}"><label for="telephone" class="col-xs-4 control-label">对TA说</label><div class="col-xs-8 text-right"><button type="submit" style="border: 0;background-color: transparent;text-align:right;width:100%"><i class="fa fa-microphone"></i> <i class="fa fa-angle-right"></i></button></div></div></form></div>'),e.put("app/gift/gift.audio.html",'<div><button ng-click="audio.paused ? audio.play() : audio.pause()">暂停</button> <button ng-click="audio.restart()">Stop</button> <button ng-click="audio.muting = !audio.muting">Mute</button><label>时间</label><input class="form-control" type="text" ng-model="audio.currentTime"><label>音量</label><input class="form-control" type="range" min="0" max="1" step="0.01" ng-model="audio.volume"></div>'),e.put("app/gift/gift.detail.html",'<div ui-view=""><div class="present-detail"><div class="present-detail-img"><img ng-src="{{\'http://\' + apiCfg.imgUri + gift.info.cover}}" ng-if="gift.info.cover"> <img ng-src="https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png" ng-if="!gift.info.cover"></div><div class="present-group"><div class="present-detail-summary"><p class="name" ng-bind="gift.info.name"></p><p class="lead" ng-bind="gift.info.lead"></p><div class="separate-box present-summary-bottom"><div class="separate-left"><span>{{gift.info.price | currency}}</span></div><div class="separate-right trade-status-green">已送出 <span ng-bind="gift.num.subpay">0</span>份</div><div class="clear"></div></div></div></div><div class="height-50"></div><div class="gift-detail"><hr><img class="title-img" src="https://img.91pintuan.com/songli/word_gift_detail.png"><hr class="hr"><div ng-bind-html="trustAsHtml(gift.info.detail)"></div></div><div class="height-60"></div><icon-href theme="grey"></icon-href><div class="height-60"></div></div><div class="bottom-btn double-col btn-left"><a ng-if="gift.num.stock != 0 && ((gift.num.stock - gift.num.subpay) <= 0)" class="button btn-ml" ng-disabled="true">已售罄</a><!-- type=1代表一送一 --> <a ng-if="!gift.num.stock || ((gift.num.stock - gift.num.subpay) > 0)" class="button btn-one" ui-sref="gift.detail.one2one-record({id:gift.id})">送一人</a><!-- type=2代表一送多 --> <a ng-if="!gift.num.stock || ((gift.num.stock - gift.num.subpay) > 0)" class="button btn-more" ui-sref="gift.detail.one2many-record({id:gift.id})">送多人</a></div></div>'),e.put("app/gift/gift.guide.html",'<div ng-swipe-up="swipe(\'up\')" ng-swipe-down="swipe(\'down\')" ng-style="{height:innerHeight}"><div class="animate-switch" ng-switch on="selection"><div class="animate-switch" ng-switch-when="2"><img src="assets/images/page3.png"></div><div class="animate-switch" ng-switch-when="1"><img src="assets/images/page2.png"></div><div class="animate-switch" ng-switch-default><img src="assets/images/page1.png"></div></div></div><div ng-if="false"><select ng-model="selection" ng-options="item for item in items"></select><code>selection={{selection}}</code><hr><div class="switch-container" ng-switch on="selection"><div class="switch" ng-switch-when="1">Settings Div</div><div class="switch" ng-switch-when="2">Home Span</div><div class="switch" ng-switch-default>default</div></div></div>'),e.put("app/gift/gift.headphones.modal.html",'<div style="margin:200px auto;width:70%"><img src="assets/images/headphones.png" class="img-responsive center-block pull-right" ng-click="close()"></div>'),e.put("app/gift/gift.listen.html",'<div class="listen-container"><div class="empty-line"></div><div class="message-block listen-message-block" style="padding: 0;min-height:{{innerHeight*94/100}}px"><div class="listen-greet"><p>{{order.receiver.name}}:</p><img style="width:100%;margin-top:10px" src="./assets/images/word_receive.png"><p style="text-align: right">{{order.sender.name}}</p><span style="color:#B5B5B6;font-size:15px;text-align: right;margin-top:-6px;display: block">{{order.time.add | date:\'yyyy年MM月dd日 hh:ss\'}}</span></div><div style="background-color:#F7F7F7;padding: 20px"><timer interval="1000" countdown="60" autostart="false"><div class="v"><div class="dialog-bg"><div class="progress"><div class="progress-active" id="pro" aria-valuenow="{{countdown}}" aria-valuemin="0" aria-valuemax="60" style="width: {{progressBar?progressBar:0}}%"></div></div></div><img class="head" ng-src="{{order.sender.headimgurl.replace(\'/0\',\'/46\')}}"><label ng-bind="(60-countdown)+\'s\'"></label></div></timer><div id="play-button" ng-if="media.media_id&&!localId" style="width:28%;margin:20px auto 0"><img src="https://img.91pintuan.com/songli/play.png" ng-click="play()" style="width:100%;margin:0"></div><div ng-if="localId"><div id="pause-button" ng-click="pause()" ng-if="status.play"><img src="https://img.91pintuan.com/songli/pause.png"></div><div id="play-button" ng-click="resume()" ng-if="status.pause"><img src="https://img.91pintuan.com/songli/play.png"></div></div><div id="finish-listen" ng-if="status.stop" ng-click="link()"><img src="https://img.91pintuan.com/songli/down.png" alt="礼物详情"></div></div></div></div>'),e.put("app/gift/gift.lists.html",'<div class="present-list present-lists" infinite-scroll="gifts.nextPage()" infinite-scroll-disabled="gifts.busy" infinite-scroll-distance="1"><div class="present" ng-style="clientWidth && {height: (clientWidth/2 + 44).toFixed(2) + \'px\'}" ng-repeat="gift in gifts.items" ng-click="link()"><div class="present-img" ng-style="clientWidth && {width: (clientWidth/2).toFixed(2) + \'px\', height: (clientWidth/2).toFixed(2) + \'px\'}"><img ng-style="clientWidth && {height: (clientWidth/2 - 20).toFixed(2) + \'px\'}" ng-src="{{\'http://\' + apiCfg.imgUri + gift.info.cover}}" ng-if="gift.info.cover"> <img ng-style="clientWidth && {height: (clientWidth/2 - 20).toFixed(2) + \'px\'}" ng-src="https://img.91pintuan.com/songli/rose_demo.png" ng-if="!gift.info.cover"><div class="present-summary"><span class="present-summary-price">&#165 <span ng-bind="gift.info.price">0</span></span></div></div><div class="gift-info-name"><span ng-bind="gift.info.name | limitTo:10"></span></div></div></div>'),e.put("app/gift/gift.my.html",'<div infinite-scroll="gifts.nextPage()" infinite-scroll-disabled="gifts.busy" infinite-scroll-distance="1"><div class="trade-list" ng-repeat="gift in gifts.items" ng-click="link()"><div class="empty-canvas title"><b><span>送给 </span><span class="trade-name" ng-bind="gift.receiver.name"></span> </b><span class="trade-date" ng-bind="gift.time.add | date:\'yyyy-MM-dd\'"></span></div><div class="empty-canvas trade-content"><img class="trade-img" src="./assets/images/trade_demo.png"><div class="content"><span ng-bind="gift.gift.info.name"></span><br><span>RMB {{gift.gift.info.price}}</span></div></div><div class="empty-canvas trade-content"><b><span class="order-state" ng-if="!gift.status.read" ng-bind="gift.status.shipping?\'已发货\':\'未发货\'"></span> <span class="order-state" ng-if="gift.status.read">已收货</span> </b><span class="num" ng-if="gift.express">快递单号:<span style="color:#FFC125" ng-bind="gift.express"></span></span></div></div></div>'),e.put("app/gift/gift.orders.html",'<div id="last-container"><div class="go-end-page"><div class="go-header"><img src="./assets/images/unknown.png"><br><img style="width:55%;margin-top: 12px" src="./assets/images/word_guide.png"></div><a class="button button-action" ui-sref="gift.detail({id:gift.id})" target="_blank">让礼物帮你说</a><h4 class="go-head-message">已有<span ng-bind="gift.num.pay">0</span>个朋友在用这个特殊礼物表达心声</h4><div class="message-block" id="marquee"><div id="marquee_content"><ul class="show-box"><li ng-repeat="order in orders"><img src="{{order.sender.info.headimgurl.replace(\'/0\',\'/46\')}}"> <span>{{order.sender.info.nickname}}</span> 对 <span>{{order.receiver.name}}</span> 说 <span>...</span></li><li ng-repeat="line in empty_line">&nbsp;</li></ul></div><div id="em"></div></div><p class="go-footer"><img src="./assets/images/word_guide_footer.png"></p></div><div style="background-color:#5D5D5D;min-height:70px"></div></div><script>marquee("marquee","marquee_content","em",60);</script>'),e.put("app/gift/gift.qrcode.html",'<div class="col-md-12 code-margin"><div class="code-you">亲爱的{{order.receiver.name}}:</div><br><div class="text-center code-logo-wai"><div class="text-center code-logo-font">微信扫一扫,听Ta对你说</div><div class="code-logo"><h2>此处是二维码</h2><br><br></div></div><div class="text-center"><div class="text-right code-me"><dl><dd class="">{{order.sender.info.nickname}}</dd><dd class="">{{order.time.add | amCalendar}}</dd></dl></div></div></div>'),e.put("app/gift/gift.share.html",'<div class="section section-last"><div class="show-head"><img class="gift-img" src="https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png" ng-src="{{\'http://\' + apiCfg.imgUri + gift.info.cover}}"><br><span class="gift-name">{{gift.info.name}}</span></div><div class="guide-bottom btn-gift"><div class="double-col"><a class="button btns btn-giftlist" ui-sref="gift.detail({id: gift.id})">我也要送</a><!--<a class="button button-highlight" ng-click="share()">分享</a>--></div></div><div class="show-box"><div class="white-box"><span class="box-img"><img src="https://img.91pintuan.com/songli/i.png"></span><span class="box-r">已有<span>{{gift.num.pay}}</span>人用这个礼物送出了祝福</span></div><div class="marquee"><ul class="scroll-box" id="marquee_content"><li ng-repeat="order in orders"><img src="{{order.sender.info.headimgurl.replace(\'/0\',\'/46\')}}"> <span ng-if="order.capacity === 1">{{order.sender.info.nickname}} 祝福 {{order.receivers[0].name}} ... </span><span ng-if="order.capacity != 1">{{order.sender.info.nickname}} 祝福 TA的朋友们</span></li><!--<li ng-repeat="order in preorders" ng-if="gift.num.pay<4">\n                    <img src="{{order.sender.info.headimgurl.replace(\'/0\',\'/46\')}}" />\n                    <span><span>{{order.sender.info.nickname}}</span> 祝福<span>{{order.receivers[0].consignee}}</span>\n                    </span>\n                </li>--></ul></div></div><!--底标--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div>'),e.put("app/gift/gift.share.modal.html",'<img ng-src="{{shareSrc}}" src="assets/images/share.png" ng-style="shareStyle" class="img-responsive pull-right share-guide">'),e.put("app/gift/gift.voice.html",'<div class="tape-margin"><div class="text-center tape-logo-wai"><div class="tape-logo" ng-bind-html="gift.info.poetry | nl2br"></div></div><div class="text-center tape-down"><div class="tape-bar"><timer interval="1000" countdown="60" autostart="false"><div class="progress gift-progress"><div class="progress-bar progress-bar-danger progress-bar-striped {{displayProgressActive}}" role="progressbar" aria-valuenow="{{countdown}}" aria-valuemin="0" aria-valuemax="60" style="width: {{progressBar}}%"></div></div><div class="center gift-second">{{countdown === 60?\'&nbsp;\':(60-countdown)+\'S\'}}</div></timer></div><div class="tape-ok"><dl ng-if="status.stop"><dd class="tape-dd-big-star"><img src="https://img.91pintuan.com/songli/record.png" ng-click="record()" class="gift-voice-big"></dd><dd class="tape-dd-big-font">读诗/表白</dd></dl><dl ng-if="status.start"><dd class="tape-dd-big-star"><img src="https://img.91pintuan.com/songli/re_stop.png" ng-click="stop()" class="gift-voice-big"></dd><dd class="tape-dd-big-font">结束录音</dd></dl><div class="tape-poa-btn" ng-if="status.record"><dl class="tape-poa-left"><dd class="tape-dd-small"><img src="https://img.91pintuan.com/songli/play.png" ng-click="playVoice()" class="gift-voice-small"></dd><dd class="tape-dd-big-font">播放</dd></dl><dl class="tape-next tape-poa-left"><dd class="tape-dd-big-over"><img src="https://img.91pintuan.com/songli/next_step.png" ng-click="save()" class="gift-voice-big"></dd><dd class="tape-dd-big-font">下一步</dd></dl><dl class="tape-poa-left"><dd class="tape-dd-small"><img src="https://img.91pintuan.com/songli/re_record.png" ng-click="record()" class="gift-voice-small"></dd><dd class="tape-dd-big-font">重录</dd></dl></div></div></div></div>'),e.put("app/gift/order.listen.html",""),e.put("app/gift/test.html",'<h3>长按列表</h3><p ng-repeat="item in list" on-long-press="itemOnLongPress(item)" on-touch-end="itemOnTouchEnd(item)">[{{ item }}]</p><h3>长按结果</h3><p ng-repeat="msg in messages">{{msg}}</p>'),e.put("app/login/login.html",'<div class="text-center" style="margin-top:100px"><img src="assets/images/icon48_wx_button.png" ng-click="wechat()"></div>'),e.put("app/main/info.html",'<div class="info_container"><div class="info_header" ng-style="clientWidth && {height: (clientWidth*0.8 + 100).toFixed(2) + \'px\'}"><img ng-style="clientWidth && {width: (clientWidth/2.5).toFixed(2) + \'px\', height: (clientWidth*0.8).toFixed(2) + \'px\'}" ng-src="https://img.91pintuan.com/songli/icon-herf/info_header_logo.png" alt=""></div><div class="info_content"><div><img ng-src="https://img.91pintuan.com/songli/icon-herf/info_content.png"></div><br><!--<p class="info_secondary_title">商家自己的微信送礼平台</p>\n\t\t<p class="info_primary_title">无需开发，免费试用</p>\n\t\t<p class="info_text">开通服务 或了解详情</p>\n\t\t<p class="info_text">请移步电脑端登录</p>\n\t\t<p class="primary_color">wx.91songni.cc</p>\n\t\t<p><span class="info_text">联系电话</span><b class="primary_color">18600083520</b></p>--></div></div>'),e.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><header class="hero-unit" id="banner"><div class="container"><h1>\'Allo, \'Allo!</h1><p class="lead">Kick-start your next web app with Angular Fullstack</p><img src="assets/images/yeoman.png" alt="I\'m Yeoman"></div></header><div class="container"><div class="row"><div class="col-lg-12"><h1 class="page-header">Features:</h1><ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="thing in awesomeThings"><li><a href="#" tooltip="{{thing.info}}">{{thing.name}}</a></li></ul></div></div></div><footer class="footer"><div class="container"><p>Angular Fullstack v2.0.13 | <a href="https://twitter.com/tyhenkel">@tyhenkel</a> | <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a></p></div></footer>'),e.put("app/wechat/app.html",'<a href="wechat:" ng-click="try_to_open_app()">App name</a>'),e.put("app/wechat/pay.html",'<div class="text-center"><h3 style="margin-top:100px;color:#595757;font-size:18px">支付连接中</h3><div class="loading2"><div></div><div></div><div></div><div></div></div></div><div class="paydiv text-center" style="clear:both"><p class="ppay">15秒后未出现支付页面，请点击刷新</p><button class="reflash btn btn-primary btn-lg" ng-click="reflash()">刷新</button><div></div></div>'),e.put("components/icon-href/icon-href.html","<div class=\"icon-href-container\" ng-style=\"theme && (theme === 'grey') && {background: '#F2F2F2'} || {background: '#8fc31f'}\"><a ui-sref=\"info\"><img ng-src=\"{{'https://img.91pintuan.com/songli/icon-herf/' + theme + '_icon.png'}}\" alt=\"logo\"></a></div>"),e.put("components/modal/modal.html",'<div class="modal-header"><button ng-if="modal.dismissable" type="button" ng-click="$dismiss()" class="close">&times;</button><h4 ng-if="modal.title" ng-bind="modal.title" class="modal-title"></h4></div><div class="modal-body"><p ng-if="modal.text" ng-bind="modal.text"></p><div ng-if="modal.html" ng-bind-html="modal.html"></div></div><div class="modal-footer"><button ng-repeat="button in modal.buttons" ng-class="button.classes" ng-click="button.click($event)" ng-bind="button.text" class="btn"></button></div>'),e.put("components/navbar/bottom.html",""),e.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller="NavbarCtrl"><div class="container"><div class="navbar-header"><button class="navbar-toggle" type="button" ng-click="isCollapsed = !isCollapsed"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a href="/" class="navbar-brand">client</a></div><div collapse="isCollapsed" class="navbar-collapse collapse" id="navbar-main"><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href="{{item.link}}">{{item.title}}</a></li></ul></div></div></div>'),e.put("app/gift/order/gift.receive.status.html",'<!-- 送一个人 --><div class="address-from-friend" ng-show="order.capacity == 1"><!-- 没被领取 --><div class="container-status" ng-show="!order.receivers || !order.receivers.length || !order.receivers[0].telephone"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br></div><!--礼物说明--><div class="content content1"><p class="receive-present-text">你的朋友{{order.sender.info.nickname}}为你准备了一份礼物，并对你说了一段话表达祝福。赶快领取吧，写下地址收到礼物时扫描二维码听Ta对你说 ~</p></div><div class="content content1 cont-onetop"><form name="giftAddrForm" novalidate ng-submit="saveAddr()"><input type="text" name="consignee" placeholder="{{giftAddrForm.consignee.$invalid && submitted?\'姓名未填写\':\' 收礼人姓名\'}}" ng-model="address.consignee" ng-maxlength="20" required class="form-text" ng-class="{\'error\':giftAddrForm.consignee.$invalid && submitted}"><p ng-show="giftAddrForm.consignee.$error.maxlength && submitted" class="help-block">* 收货人字数太多.</p><input type="tel" name="telephone" placeholder="{{giftAddrForm.telephone.$invalid && submitted?\'手机号未填写\':\'手机号码\'}}" ng-model="address.telephone" required phone class="form-text" ng-class="{\'error\':giftAddrForm.telephone.$invalid && submitted}"><p ng-show="giftAddrForm.telephone.$error.phone && submitted" class="help-block">* 不是有效的手机号码.</p><textarea rows="4" name="address" placeholder="{{giftAddrForm.address.$invalid && submitted?\'收货地址未填写\':\'请留下详细地址，确保能收到礼物\'}}" ng-model="address.address" ng-maxlength="300" required class="form-textarea address" ng-class="{\'error\':giftAddrForm.address.$invalid && submitted}"></textarea><p ng-show="giftAddrForm.address.$error.maxlength" class="help-block">* 配送地址字数太多.</p><button type="submit" class="button btn-comm btn-wc btn-green">完成</button></form></div><!--content--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div><!--[收礼人] 已被领取 再次打开 --><div class="container-status" ng-if="order.receivers && order.receivers.length && order.receivers[0].telephone"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><!--礼物说明--><div class="content content1"><p class="receive-info info1">礼物已被领取</p><p class="receive-info info2">等待商家发货</p></div><div class="content content1 cont-info"><p><label>收礼人:</label><span>{{ order.receivers[0].consignee }}</span></p><p><label>手机号:</label><span>{{ order.receivers[0].telephone }}</span></p><p><label>地&nbsp;&nbsp;&nbsp;&nbsp;址:</label><span>{{ order.receivers[0].address }}</span></p></div><!--content--><div class="footer-btn"><!--送礼人打开的id = 微信用户的id--><!--<icon-href theme="white"></icon-href>--> <a ng-if="order.sender.openid === user.openid" ui-sref="gift.list" class="button">继续送礼</a> <a ng-if="order.sender.openid != user.openid" ui-sref="gift.detail({id: order.gift.id})" class="button">我也要送礼</a></div><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div></div><!-- 送多个人 --><div ng-if="order.capacity > 1"><!-- 【收礼人】:还没有收礼，而且有余 --><div class="receive-present" ng-if="orderStatus == 1"><div class="container-status"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><!--礼物--><div class="head-main head-title-green"><p class="left-count">还有{{orderSurplus}}份</p><p class="head-send-status">{{orderReserved}}人已领取</p></div><!--礼物说明--><div class="content"><p class="receive-present-text">你的朋友{{order.sender.info.nickname}}为你准备了一份礼物，并对你说了一段话。数量有限赶快领取！收到礼物时扫描语音二维码听听{{order.sender.info.nickname}}说了些什么吧<!--你已成功领取{{order.sender.info.nickname}}的礼物，等待商家发 货吧。不要忘了除了礼物{{order.sender.info.nickname}}还对你说 了一段话，收到礼物时扫描语音码，听听ta都说了些什么吧。--></p><a href="#" class="button btn-bg" ng-click="fill()">领取礼物</a></div><!--底标--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div></div><!-- 【收礼人】：已经收礼品了  --><div class="open-link-end" ng-if="(orderStatus == 10) || (orderStatus == 11)"><div class="container-status"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><!--礼物--><div class="head-main head-title-green"><p class="left-count">你已领取礼物</p><p class="head-send-status" ng-if="order.receivers && (order.receivers.length != order.capacity)">还有{{orderSurplus}}份</p><p class="head-send-status" ng-if="order.receivers && (order.receivers.length === order.capacity)">礼物已被领完</p></div><!--礼物说明--><div class="content"><p class="receive-present-text"><!--你的朋友{{order.sender.info.nickname}}为你准备了一份礼物，并对你说了一段话。数量有限赶快领取！收到礼物时扫描语音二维码听听{{order.sender.info.nickname}}说了些什么吧--> 你已成功领取{{order.sender.info.nickname}}的礼物，等待商家发货吧。不要忘了除了礼物{{order.sender.info.nickname}}还对你说了一段话，收到礼物时扫描语音码，听听ta都说了些什么吧。</p><!--<a href="javascript: void(0)" class="button button-done">你已领取礼物</a>--><!--<a ui-sref="gift.list" class="button button-success">我也要送礼</a>--> <a ui-sref="gift.detail({id: order.gift.id})" class="button button-success">我也要送礼</a></div><!--content--></div><!--interact--><div ng-if="order.receivers && order.receivers.length" class="interact"><p>{{ order.receivers.length }}人已领取</p><ul><li ng-repeat="receiver in order.receivers"><img ng-src="{{receiver.headimgurl}}"> <span class="receiver-name">{{ receiver.name || receiver.consignee }} </span><span class="font">已领取</span> <span class="date">{{ receiver.fillinDate | date:\'MM-dd HH:mm\'}}</span></li></ul></div><!--底标--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div><!-- 【送礼人】:打开链接，还有礼物 --><div class="open-link" ng-if="(orderStatus == 101) || (orderStatus == 111)"><div class="container-status"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><!--礼物--><div class="head-main head-title-green"><p class="left-count">还有{{orderSurplus}}份</p><p class="head-send-status">{{order.capacity - orderSurplus}}人已领取</p></div><!--礼物说明--><div class="content"><p class="receive-present-text">已有{{order.capacity - orderSurplus}}人领取你的礼物,还有{{orderSurplus}}份礼物,继续送礼吧~</p><a ng-click="shareAsSender()" id="start-send-present" class="button button-action">继续送礼</a></div><!--interact--><div ng-if="order.receivers && order.receivers.length" class="interact"><p>{{ order.receivers.length }}人已领取</p><ul><li ng-repeat="receiver in order.receivers"><img ng-src="{{receiver.headimgurl}}"> <span class="receiver-name">{{ receiver.name || receiver.consignee }} </span><span class="font">已领取</span> <span class="date">{{ receiver.fillinDate | date:\'MM-dd HH:mm\'}}</span></li></ul></div><!--底标--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div></div><!-- 【送礼人】:打开链接，已经送光了 --><div class="open-link-end" ng-if="(orderStatus == 100) || (orderStatus == 110)"><div class="container-status"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><!--礼物--><div class="head-main head-title-green"><p class="left-count">礼物已被抢完</p><p class="head-send-status">{{orderReserved}}人已领取</p></div><!--礼物说明--><div class="content"><p class="receive-present-text"><!--你的朋友{{order.sender.info.nickname}}为你准备了一份礼物，并对你说了一段话。数量有限赶快领取！收到礼物时扫描语音二维码听听{{order.sender.info.nickname}}说了些什么吧--> 你已成功领取{{order.sender.info.nickname}}的礼物，等待商家发货吧。不要忘了除了礼物{{order.sender.info.nickname}}还对你说了一段话，收到礼物时扫描语音码，听听ta都说了些什么吧。</p><!--<a href="javascript: void(0)" class="button button-done">手慢了，礼物已被抢完</a>--><!--<a ui-sref="gift.list" class="button button-success">我也要送礼</a>--> <a ui-sref="gift.detail({id: order.gift.id})" class="button button-success">我也要送礼</a></div><!--content--></div><!--interact--><div ng-if="order.receivers && order.receivers.length" class="interact"><p>{{ order.receivers.length }}人已领取</p><ul><li ng-repeat="receiver in order.receivers"><img ng-src="{{receiver.headimgurl}}"> <span class="receiver-name">{{ receiver.name || receiver.consignee }} </span><span class="font">已领取</span> <span class="date">{{ receiver.fillinDate | date:\'MM-dd HH:mm\'}}</span></li></ul></div><!--底标--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div><!-- 【收礼人】:还没有收礼，但是礼物已经没有了 --><div class="open-link-end" ng-if="orderStatus == 0"><div class="container-status"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><!--礼物--><div class="head-main head-title-green"><p class="left-count">手慢了，礼物已被抢完</p><p class="head-send-status">{{orderReserved}}人已领取</p></div><!--礼物说明--><div class="content"><p class="receive-present-text"><!--你的朋友{{order.sender.info.nickname}}为你准备了一份礼物，并对你说了一段话。数量有限赶快领取！收到礼物时扫描语音二维码听听{{order.sender.info.nickname}}说了些什么吧--> 你已成功领取{{order.sender.info.nickname}}的礼物，等待商家发货吧。不要忘了除了礼物{{order.sender.info.nickname}}还对你说了一段话，收到礼物时扫描语音码，听听ta都说了些什么吧。</p><!--<a href="javascript: void(0)" class="button button-done">手慢了，礼物已被抢完</a>--><!--<a ui-sref="gift.list" class="button button-success">我也要送礼</a>--> <a ui-sref="gift.detail({id: order.gift.id})" class="button button-success">我也要送礼</a></div><!--content--></div><!--interact--><div ng-if="order.receivers && order.receivers.length" class="interact"><p>{{ order.receivers.length }}人已领取</p><ul><li ng-repeat="receiver in order.receivers"><img ng-src="{{receiver.headimgurl}}"> <span class="receiver-name">{{ receiver.name || receiver.consignee }} </span><span class="font">已领取</span> <span class="date">{{ receiver.fillinDate | date:\'MM-dd HH:mm\'}}</span></li></ul></div><!--底标--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div></div>'),e.put("app/gift/orderlist/order.info.html",'<!-- 单人订单 --><div class="present-sent-detail listgift" ng-show="order.capacity == 1"><div class="card-group"><div class="detail-title"><div class="detail-title-img"><img ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}" class="od-trade-img" ng-if="order.gift.info.cover"> <img src="https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png" class="od-trade-img" ng-if="!order.gift.info.cover"></div><div class="detail-title-content"><p class="giftname">{{order.gift.info.name}}</p><!--<p>单价：{{order.gift.info.price}}元/份</p>--></div></div></div><div class="box-list"></div><div class="card-group2"><ul class="card detail-content"><li class="card-li"><span class="listInfo">单价：</span> <span class="listorder">{{order.gift.info.price | currency}}</span></li><li class="clear"></li><li class="card-li"><span class="listInfo">数量：</span> <span class="listorder">{{order.capacity}}份</span></li><li class="clear"></li><li class="card-li"><span class="listInfo">总价：</span> <span class="listorder">{{order.gift.info.price * order.capacity | currency}}</span></li><li class="clear"></li><li class="card-li"><span class="listInfo">下单时间：</span> <span class="listorder listorder2">{{order.time.add | date:\'yyyy-MM-dd HH:MM:ss\'}}</span></li><li class="clear"></li><li class="card-li" ng-if="order.express"><span class="listInfo">快递单号:</span> <span class="listorder listorder2" ng-bind="order.receivers[0].express.no"></span></li><li class="clear"></li></ul></div><!-- #TODO leave order stauts to https://github.com/arrking/songni/issues/74 --><!--礼物状态--><div class="card-group3"><ul class="detail-status"><li ng-if="true"><span class="state">礼物状态</span></li><li ng-if="receiver.status.read" class="receiver"><span class="name">{{receiver.status.read_date | date:\'yyyy-MM-dd HH:mm:ss\'}}</span> <span class="status status-listen">已收货</span></li><li ng-if="receiver.status.shipping" class="receiver"><span class="name">{{receiver.status.shipping_date | date:\'yyyy-MM-dd HH:mm:ss\'}}</span> <span class="status status-deliver">已发货</span></li><li ng-if="receiver && receiver.telephone" class="receiver"><span class="name">{{receiver.fillinDate | date:\'yyyy-MM-dd HH:mm:ss\'}}</span> <span class="status status-deliver">已领取</span></li><li class="receiver"><span class="name">{{receiver && order.time.pay | date:\'yyyy-MM-dd HH:mm:ss\'}}下单</span> <a ng-if="receiver && receiver.telephone" ui-sref="order.detail.one2one-address({id: order.id})" class="status status-deliver">礼物已被领取 <img class="spanimg" src="assets/images/right.png" alt=""></a><a ng-if="!receiver || !receiver.telephone" ui-sref="order.detail.one2one-address({id: order.id})" class="status status-deliver">1份礼物未被领取 <img class="spanimg" src="assets/images/right.png" alt=""></a></li></ul></div></div><!-- 多人订单 --><div class="present-sent-detail listgift" ng-show="order.capacity > 1"><div class="card-group"><div class="detail-title"><div class="detail-title-img"><img ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}" class="od-trade-img" ng-if="order.gift.info.cover"> <img src="https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png" class="od-trade-img" ng-if="!order.gift.info.cover"></div><div class="detail-title-content"><p class="giftname">{{order.gift.info.name}}</p><!--<p>单价：{{order.gift.info.price}}元/份</p>--></div></div></div><div class="box-list"></div><div class="card-group2"><ul class="card detail-content"><li class="card-li"><span class="listInfo">单价：</span> <span class="listorder">{{order.gift.info.price | currency}}</span></li><li class="clear"></li><li class="card-li"><span class="listInfo">数量：</span> <span class="listorder">{{order.capacity}}份</span></li><li class="clear"></li><li class="card-li"><span class="listInfo">总价：</span> <span class="listorder">{{order.gift.info.price * order.capacity | currency}}</span></li><li class="clear"></li><li class="card-li"><span class="listInfo">下单时间：</span> <span class="listorder listorder2">{{order.time.add | date:\'yyyy-MM-dd HH:MM:ss\'}}</span></li><li class="clear"></li><li class="card-li" ng-if="order.express"><span class="listInfo">快递单号:</span> <span class="listorder listorder2" ng-bind="order.receivers[0].express.no"></span></li><li class="clear"></li></ul></div><!--礼物状态--><div class="card-group3"><!-- #TODO leave order stauts to https://github.com/arrking/songni/issues/74 --><ul class="detail-status"><li ng-if="listen_num || ship_num || receive_num"><span class="state">礼物状态</span></li><li class="receiver" ng-if="listen_num != 0"><span class="trade-time">{{readTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</span><div class="trade-num trade-status-yellow" ng-click="listened()">已收货 {{listen_num}} <img class="spanimg" src="assets/images/right.png" alt=""></div></li><li class="receiver" ng-if="ship_num != 0"><span class="trade-time">{{shippedTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</span><div class="trade-num trade-status-green" ng-click="shipped()">已发货 {{ship_num}} <img class="spanimg" src="assets/images/right.png" alt=""></div></li><li class="receiver" ng-if="receive_num != 0"><span class="trade-time">{{receivedTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</span><div class="trade-num trade-status-green" ng-click="received()">已领取 {{receive_num}} <img class="spanimg" src="assets/images/right.png" alt=""></div></li><li class="receiver"><span class="trade-time">{{order.time.pay | date:\'yyyy-MM-dd HH:mm:ss\'}}</span><div class="trade-num trade-status-green" ng-click="jumpToAddressCard()">{{order.capacity - receive_num === 0 ? \'礼物已被领完\' : order.capacity - receive_num + \'份礼物未领取\' }} <img class="spanimg" src="assets/images/right.png" alt=""></div></li></ul></div></div>'),
e.put("app/gift/orderlist/order.list.html",'<div class="listgift" infinite-scroll="gifts.nextPage()" infinite-scroll-disabled="gifts.busy" infinite-scroll-distance="1"><div ng-repeat="order in gifts.items" ng-click="link(order.id)" style="margin-top:15px"><!-- 多人订单 --><div class="trade-group" ng-show="order.capacity > 1"><!--<div class="card">\r\n                <span class="trade-status-green">{{order.receivers.length}}人已领取</span>\r\n                <span class="trade-date" ng-bind="order.time.add | date:\'yyyy-MM-dd\'"></span>\r\n            </div>--><div class="card trade-content"><div class="order-header"><div class="header-left"><img class="trade-img" src="https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png" ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}"></div><div class="header-right"><span ng-bind="order.gift.info.name"></span></div></div><div class="order-content"><ul class="orderlist"><li class="list-li"><span class="listname">单价：</span> <span class="listnum">{{order.gift.info.price | currency}}</span> <span class="num">x{{order.capacity}}</span></li><li class="clear"></li><li class="list-li"><span class="listname">支付金额：</span> <span class="listnum">{{order.gift.info.price * order.capacity | currency}}</span></li><li class="clear"></li><li class="list-li"><span class="listname">下单时间：</span> <span class="listnum">{{order.time.add | date:\'yyyy-MM-dd HH:MM:ss\'}}</span></li><li class="clear"></li></ul></div><div class="order-code"><span class="code">订单号 {{order.serial}}</span> <span class="icon-r"><img class="spanimg" src="assets/images/right.png" alt=""></span></div></div></div><!-- 单人订单 --><div class="trade-group" ng-show="order.capacity ==1 "><!--<div class="card">\r\n                <span>送给 </span>\r\n                <span class="trade-name">{{order.receivers[0].name}}</span>\r\n                <span class="trade-date" ng-bind="order.time.add | date:\'yyyy-MM-dd\'"></span>\r\n            </div>--><div class="card trade-content"><div class="order-header"><div class="header-left"><img class="trade-img" src="https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png" ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}"></div><div class="header-right"><span ng-bind="order.gift.info.name"></span></div></div><div class="order-content"><ul class="orderlist"><li class="list-li"><span class="listname">单价：</span> <span class="listnum">{{order.gift.info.price | currency}}</span> <span class="num">x{{order.capacity}}</span></li><li class="clear"></li><li class="list-li"><span class="listname">支付金额：</span> <span class="listnum">{{order.gift.info.price * order.capacity | currency}}</span></li><li class="clear"></li><li class="list-li"><span class="listname">下单时间：</span> <span class="listnum">{{order.time.add | date:\'yyyy-MM-dd HH:MM:ss\'}}</span></li><li class="clear"></li></ul></div><div class="order-code"><span class="code">订单号 {{order.serial}}</span> <span class="icon-r"><img class="spanimg" src="assets/images/right.png" alt=""></span></div><!--礼物领取状态--><!--<div class="order-state">\r\n                \t<span class="" ng-if="!order.status.read" ng-bind="order.status.shipping?\'已发货\':\'未发货\'"></span>\r\n                \t<span class="" ng-if="order.status.read">已收货</span>\r\n                \t<span class="num" ng-if="order.express">\r\n                \t\t快递单号:<span style="color:#FFC125;" ng-bind="order.receivers[0].express.no"></span>\r\n                \t</span>\r\n                </div>--></div></div></div></div>'),e.put("app/gift/orderlist/order.listened.html",'<div class="present_received_list listgift"><div class="card-group"><div class="card card-ship" ng-repeat="receiver in receivers"><div class="present-rl-item"><img src="http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png" ng-src="{{receiver.headimgurl}}"><div class="ite-summary"><div class="clear"></div><div class="ite-content"><span class="ite-name">{{receiver.consignee}}</span> <span class="ite-status"><span class="trade-status-green">已收货</span></span></div><div><span class="ite-status"><span>{{receiver.status.read_date | date:\'yyyy-MM-dd HH:mm:ss\'}}</span></span></div></div></div><div class="express">{{ receiver }} <span class="span1">快递单号</span> <span class="span2">{{receiver.express.company.name}} {{receiver.express.no}}</span></div></div></div></div>'),e.put("app/gift/orderlist/order.received.html",'<div class="present_received_list secondpage"><div class="card-group"><div class="card card-received" ng-repeat="receiver in receivers"><div class="present-rl-item"><img src="http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png" ng-src="{{receiver.headimgurl}}"><div class="ite-summary"><div class="clear"></div><div class="ite-content"><span class="ite-name">{{receiver.consignee}}</span> <span class="ite-status"><span class="trade-status-green">已领取</span></span></div><div><span class="ite-status"><span>{{receiver.fillinDate | date:\'yyyy-MM-dd HH:mm:ss\'}}</span></span></div></div></div></div><div class="box-second"></div></div></div>'),e.put("app/gift/orderlist/order.shipped.html",'<div class="present_received_list listgift"><div class="card-group"><div class="card card-ship" ng-repeat="receiver in receivers"><div class="present-rl-item"><img src="http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png" ng-src="{{receiver.headimgurl}}"><div class="ite-summary"><div class="clear"></div><div class="ite-content"><span class="ite-name">{{receiver.consignee}}</span> <span class="ite-status"><span class="trade-status-green">已发货</span></span></div><div><span class="ite-status"><span>{{receiver.status.shipping_date | date:\'yyyy-MM-dd HH:mm:ss\'}}</span></span></div></div></div><div class="express"><span class="span1">快递单号</span> <span class="span2">{{receiver.express.company.name}} {{receiver.express.no}}</span></div></div></div></div>'),e.put("app/gift/order/one2many/address.fillin.html",'<div class="address-from-friend form-friend"><div class="container-status"><!--icon.logo.right--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><div class="head-fillin"><p class="center-mini-text text-color">写下收货地址，收到礼物时，扫描礼物上的语音二维码听Ta对你说 ~</p></div><div class="content content1 content-top"><!--<input type="text" ng-model="data.consignee" class="form-text" name="name" required="required" placeholder="您的姓名" />\r\n            <input type="tel" ng-model="data.telephone" class="form-text" name="tel" required="required" placeholder="手机号码" />\r\n            <textarea ng-model="data.address" class="form-textarea address" name="address" required="required" rows="6" placeholder="请留下详细收货地址，确保能收到礼物"></textarea>\r\n            <div class="submit-btn">\r\n                <button type="submit" ng-click="saveAddr()" class="button btn-comm btn-wc btn-green ">完成</button>\r\n            </div>--><form class="form-horizontal" name="addressFriendForm" novalidate ng-submit="saveAddr()"><input type="text" ng-model="data.consignee" class="form-text" name="consignee" required placeholder="您的姓名"><p ng-show="addressFriendForm.consignee.$invalid && submitted" class="help-block">* 请输入收货人姓名.</p><input type="tel" ng-model="data.telephone" class="form-text" name="telephone" phone required placeholder="手机号码"><p ng-show="addressFriendForm.telephone.$invalid && submitted" class="help-block">* 请输入有效的手机号码.</p><textarea ng-model="data.address" class="form-textarea address" name="address" maxlength="50" required rows="6" placeholder="请留下详细收货地址，确保能收到礼物"></textarea><p ng-show="addressFriendForm.address.$error.required && submitted" class="help-block">* 请输入收货人的详细地址.</p><p ng-show="addressFriendForm.address.$error.maxlength && submitted" class="help-block">* 配送地址字数太多.</p><button type="submit" class="button btn-comm btn-wc btn-green">完成</button></form></div><!--底标--><div class="icon-hrer"><icon-href theme="white"></icon-href></div></div></div>'),e.put("app/gift/order/one2many/address.html",'<!--送礼人购买后页面--><div class="pay-success-several"><div class="container-status"><!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><!--礼物个数--><div class="head-main"><!--gift.logo--> <img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--礼物已备好--><p ng-if="!order.receivers || !order.receivers.length" class="head-title-green left-count left-all">{{order.capacity}}份礼物已备好</p><!--礼物领取中--><div ng-if="order.receivers && order.receivers.length && order.receivers.length != order.capacity" class="head-title-green"><p class="left-count">还有{{ order.capacity - order.receivers.length }}份</p><p class="head-send-status">{{ order.receivers.length }}人已领取</p></div><!--礼物已经被抢完--><div ng-if="order.receivers && order.receivers.length && order.receivers.length === order.capacity" class="head-title-green"><p class="left-count">礼物已被抢完</p><p class="head-send-status">{{ order.receivers.length }}人已领取</p></div></div></div><!--礼物说明--><div class="content"><p class="send-gift-text">您已成功购买{{order.capacity}}份{{order.gift.info.name}},发至到微信好友/微信群或朋友圈,开始送礼吧！</p><a href="#" id="start-send-present" ng-click="share()" ng-class="{\'btn-no\' :order.receivers.length === order.capacity}" class="button btn-bg">{{ order.receivers && order.receivers.length && order.receivers.length === order.capacity ? \'礼物已被抢完\' : order.receivers && order.receivers.length ? \'继续送礼\' : \'开始送礼物\' }}</a></div><!--礼物领取中--><div ng-if="order.receivers && order.receivers.length && order.receivers.length != order.capacity || order.receivers.length === order.capacity" class="interact"><p>{{ order.receivers.length }}人已领取</p><ul><li ng-repeat="receiver in order.receivers"><img ng-src="{{receiver.headimgurl}}"> <span class="receiver-name">{{ receiver.name || receiver.consignee }} </span><span class="font">已领取</span> <span class="date">{{ receiver.fillinDate | date:\'MM-dd HH:mm\'}}</span></li></ul></div><!--底标--><div class="icon-hrer"><div ng-if="!order.receivers || !order.receivers.length" class="icon-height"></div><icon-href theme="white"></icon-href></div></div>'),e.put("app/gift/order/one2many/pay.html",'<div style="height:8px"></div><div class="empty-canvas empty-pay" ng-controller="GiftPayOne2ManyCtrl"><div class="pay"><div class="card-pay"><div class="present-detail-summary"><p class="name">{{gift.info.name}}</p><p class="lead">{{gift.info.lead}}</p><div class="separate-box present-summary-bottom"><div class="separate-left"><span>{{gift.info.price | currency}}</span></div><div class="separate-right trade-status-h"><span>{{capacity}}份</span></div><div class="clear"></div></div></div></div><div class="card-pay total-pay"><div class="card"><div class="separate-box"><div class="separate-left">总 计</div><div class="separate-right">{{ gift.info.price * capacity | currency }}</div><div class="clear"></div></div></div></div><!--/total-pay--><div class="pay-now"><a class="button btn-pay btn-green" ng-click="wxPay()" ng-disabled="submiting" ng-bind="submiting?\'支付中...\':\'支付\'"></a></div></div></div>'),e.put("app/gift/order/one2many/record.html",'<div class="sound-record sound-more" ng-style="{height:innerHeight-54+\'px\'}"><div class="to-who to-more"><img class="img" src="https://img.91pintuan.com/songli/gift_copies-more.png"><br><div class="to-who-count"><div class="input-group"><!--左减--> <span class="input-group-btn input-left"><button type="button" ng-click="reduCapacity()" class="btn btn-success btn-number btn-left"><span>&minus;</span></button> </span><!--输入框--> <span class="input-middle"><input type="number" ng-model="giftOrderCapacity" pattern="\\d*" class="form-control input-number" placeholder="2" min="2"> </span><!--右加--> <span class="input-group-btn input-right"><button type="button" ng-click="incrCapacity()" class="btn btn-success btn-number" data-type="plus"><span>+</span></button></span></div></div></div><div class="voice-box"><div class="voice-process"><img src="https://img.91pintuan.com/songli/word-zhufu.png"><timer interval="1000" countdown="60" autostart="false"><div class="progress"><div class="progress-active" id="pro" aria-valuenow="{{countdown}}" aria-valuemin="0" aria-valuemax="60" style="width: {{progressBar?progressBar:0}}%"></div></div><span class="label" id="second" style="text-align:right; display: block">{{countdown === 60?\'&nbsp;\':(60-countdown)+\'S\'}}</span></timer></div><!-- 开始录音 --><div id="record-before" ng-if="status.stop"><img src="https://img.91pintuan.com/songli/record.png" ng-click="record()"><br><span class="hint">点击开始录音</span></div><!-- 结束录音 --><div id="record-before" ng-if="status.start"><img src="https://img.91pintuan.com/songli/re_stop.png" ng-click="stop()"><br><span class="hint">结束录音</span></div><!-- 调试录音 --><div id="record-after" ng-if="status.record"><div class="left-button" ng-click="playVoice()"><img src="https://img.91pintuan.com/songli/play_red.png"><br><label class="hint">播放</label></div><div class="left-button" ng-click="rerecord()"><img src="https://img.91pintuan.com/songli/re_record.png"><br><label class="hint">重录</label></div><div class="right-button" ng-click="save()"><img src="https://img.91pintuan.com/songli/next_step.png"><br><label class="hint">下一步</label></div></div></div></div>'),e.put("app/gift/order/one2one/address.html",'<!--送礼人头像--><div ng-if="order.receivers.length == 1 && order.receivers[0].telephone"><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}的礼物</span></div><div class="head head-logo"><img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><!--<p class="center-mini-text">您购买的礼物已经填写收货信息，等待商家发货吧～</p>--></div></div><!--[送礼人-公众号]再次打开时--><div ng-if="order.receivers.length == 1 && order.receivers[0].telephone" class="message-block top1 content content1"><form class="form-horizontal"><!--<input ng-disabled="true" class="input-msg input-msg1 form-text" type="text" name="consignee" placeholder="收礼人姓名" ng-model="order.receivers[0].consignee">\n      <input ng-disabled="true" class="input-msg input-msg1 form-text" type="tel" name="telephone" placeholder="手机号码" ng-model="order.receivers[0].telephone">\n      <textarea ng-disabled="true" rows="2" name="address" style="height:6em" class="input-msg input-msg1 form-textarea" ng-model="order.receivers[0].address"></textarea>--><div class="content content1"><p class="receive-info info1">礼物已被领取</p><p class="receive-info info2">等待商家发货</p></div><div class="content content1 cont-info cont-bottom"><p><label>收礼人:</label><span>{{ order.receivers[0].consignee }}</span></p><p><label>手机号:</label><span>{{ order.receivers[0].telephone }}</span></p><p><label>地&nbsp;&nbsp;&nbsp;&nbsp;址:</label><span>{{ order.receivers[0].address }}</span></p></div><div class="footer-btn footer-btn1"><a ui-sref="gift.list" class="button">继续送礼</a></div></form></div><!--送礼人头像--><div ng-if="order.receivers.length == 1 && !order.receivers[0].telephone"><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"></div><div class="head head-logo"><img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><p class="center-mini-text">支付成功，请填写收礼人的收货信息。不知道地址可以直接也发给对方填写哦</p></div></div><form class="form-horizontal" name="giftAddrForm" novalidate ng-submit="saveAddr()"><div ng-if="order && order.receivers && order.receivers.length && !order.receivers[0].telephone" class="message-block content content1"><input class="form-text" type="text" name="consignee" placeholder="收礼人姓名" ng-model="address.consignee" ng-maxlength="20" required><p ng-show="giftAddrForm.consignee.$error.maxlength && submitted" class="help-block">* 收货人字数太多.</p><input class="form-text" type="tel" name="telephone" placeholder="手机号码" ng-model="address.telephone" required phone><p ng-show="giftAddrForm.telephone.$invalid && submitted" class="help-block">* 请输入有效的手机号码.</p><textarea rows="2" name="address" style="height:6em" class="form-textarea" placeholder="请留下详细收货地址，确保能收到礼物" ng-model="address.address" ng-maxlength="500" required></textarea><p ng-show="giftAddrForm.address.$error.required && submitted" class="help-block">* 请输入收货人的详细地址.</p><p ng-show="giftAddrForm.address.$error.maxlength && submitted" class="help-block">* 配送地址字数太多.</p><button type="submit" class="button btn-comm btn-wc btn-green">完成</button> <button class="button btn-comm btn-share btn-yellow" ng-click="share()">不知道地址，发给好友填写</button><br></div><div class="icon-hrer"><icon-href theme="white"></icon-href></div></form>'),e.put("app/gift/order/one2one/pay.html",'<div style="height:8px"></div><div class="empty-canvas empty-pay" ng-controller="GiftPayOne2OneCtrl"><div class="pay"><div class="card-pay"><div class="present-detail-summary"><p class="name">{{gift.info.name}}</p><p class="lead">{{gift.info.lead}}</p><div class="separate-box pay-bottom"><div class="separate-left">{{gift.info.price | currency}}</div><div class="separate-right trade-status-h"><span>1份</span></div><div class="clear"></div></div></div></div><div class="card-pay total-pay"><div class="card"><div class="separate-box"><div class="separate-left">总 计</div><div class="separate-right">{{ gift.info.price | currency }}</div><div class="clear"></div></div></div></div><!--/total-pay--><div class="pay-now"><a class="button btn-pay btn-green" ng-click="wxPay()" ng-disabled="submiting" ng-bind="submiting?\'支付中...\':\'支付\'"></a></div></div></div>'),e.put("app/gift/order/one2one/received.html",'<!--送礼人头像--><div class="head-center"><img ng-src="{{order.sender.info.headimgurl}}"></div><div class="head head-logo"><img class="icon-img" src="https://img.91pintuan.com/songli/i.png"><p class="center-mini-text">你所购买的礼物已送出！收礼人信息如下</p></div><div class="message-block content content1"><form class="form-horizontal" novalidate>{{JSON.stringify(receiver)}} <input ng-disabled="true" class="input-msg form-text" type="text" name="consignee" ng-model="receiver.consignee"> <input ng-disabled="true" class="input-msg form-text" type="tel" name="telephone" ng-model="receiver.telephone"><textarea ng-disabled="true" rows="2" name="address" style="height:6em" class="input-msg form-textarea" ng-model="receiver.address"></textarea></form></div>'),e.put("app/gift/order/one2one/record.html",'<form name="giftAddrForm" novalidate><div class="sound-record sound-one" ng-style="{height:innerHeight-54+\'px\'}"><div class="to-who"><img src="https://img.91pintuan.com/songli/word_send_to.png"><br><input type="text" name="address.name" placeholder="{{giftAddrForm[\'address.name\'].$invalid && submitted?\'昵称未填写\':\'Ta的名字\'}}" ng-model="address.name" ng-maxlength="20" required class="input-msg input-one" ng-class="{\'error\':giftAddrForm[\'address.name\'].$invalid && submitted}"><p ng-show="giftAddrForm.name.$error.maxlength && submitted" class="help-block">昵称字数太多.</p></div><div class="voice-box"><div class="voice-process"><img src="https://img.91pintuan.com/songli/word_say_to.png"><timer interval="1000" countdown="60" autostart="false"><div class="progress"><div class="progress-active" id="pro" aria-valuenow="{{countdown}}" aria-valuemin="0" aria-valuemax="60" style="width: {{progressBar?progressBar:0}}%"></div></div><span class="label" id="second" style="text-align:right; display: block">{{countdown === 60?\'&nbsp;\':(60-countdown)+\'S\'}}</span></timer></div><!-- 开始录音 --><div id="record-before" ng-if="status.stop"><img src="https://img.91pintuan.com/songli/record.png" ng-click="record()"><br><span class="hint">点击开始录音</span></div><!-- 结束录音 --><div id="record-before" ng-if="status.start"><img src="https://img.91pintuan.com/songli/re_stop.png" ng-click="stop()"><br><span class="hint">结束录音</span></div><!-- 调试录音 --><div id="record-after" ng-if="status.record"><div class="left-button" ng-click="playVoice()"><img src="https://img.91pintuan.com/songli/play_red.png"><br><label class="hint">播放</label></div><div class="left-button" ng-click="rerecord()"><img src="https://img.91pintuan.com/songli/re_record.png"><br><label class="hint">重录</label></div><div class="right-button" ng-click="save()"><img src="https://img.91pintuan.com/songli/next_step.png"><br><label class="hint">下一步</label></div></div></div></div></form>')}]);