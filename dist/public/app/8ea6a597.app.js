"use strict";function getUrlVars(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b}function marquee(a,b,c,d){function e(){if(g>=d){f.css("top","0px"),g=0;var a=$(b).children()[0].innerHTML;f.children()[0].remove(),f.append("<li>"+a+"</li>")}else g+=1,f.css("top",-g+"px")}var f=(document.getElementById(a).offsetHeight,$(b)),g=0;setInterval(e,c)}var debugWx=!1,hostname=window.location.hostname.split("."),token="",req=new XMLHttpRequest;req.open("GET","/config",!1),req.send(null);var response=JSON.parse(req.responseText),api=response.api;window.SONGNI_CFG_API=api,debugWx=!1;var code=getUrlVars().code;code&&(req.open("GET",api.uri+"/wechat/token?code="+code,!1),req.setRequestHeader("X-API-From",api.from),req.setRequestHeader("X-Component",api.component),req.send(null),token=JSON.parse(req.responseText).token),angular.module("clientApp",["ngCookies","ngResource","ngSanitize","ngAnimate","ngTouch","ui.router","ui.bootstrap","restangular","angularMoment","infinite-scroll","currencyFilter","ngTouch","angular-carousel","timer","monospaced.elastic","ngHolder","swipe","angularCSS"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$logProvider","RestangularProvider","$cssProvider",function(a,b,c,d,e,f,g){angular.extend(g.defaults,{preload:!0}),b.otherwise("/"),c.html5Mode(!0),d.defaults.useXDomain=!0,delete d.defaults.headers.common["X-Requested-With"],e.debugEnabled("disable"),f.setBaseUrl(api.uri)}]).run(["$rootScope","$cookieStore","$state","$stateParams","Restangular","RestWechat","Wechat","Alert",function(a,b,c,d,e,f,g,h){e.setErrorInterceptor(function(a,c,d){401===a.status&&(b.remove("token"),f.one("client").get().then(function(a){location.href=a.link}))}),e.addResponseInterceptor(function(a,c,d,e,f,g){return 205===f.status&&(b.remove("token"),h.add("warning","刷新重新加载本地内容！"),location.reload()),a});var i={"X-API-From":api.from,"X-Component":api.component};e.setDefaultHeaders(i),token&&b.put("token",token),b.get("token")&&(i.Authorization=b.get("token"),e.setDefaultHeaders(i),f.one("userinfo").get().then(function(b){a.user=b})),e.one("merchant").get().then(function(b){a.merchant=b}),a.$on("$stateChangeStart",function(d,e,g,h,i){a.referer=c.href(h.name,i),e.authenticate&&!b.get("token")&&(d.preventDefault(),f.one("client").get({referer:c.href(e.name,g)}).then(function(a){location.href=a.link}))}),a.$on("$stateChangeStart",function(a,b,d,e,f){"gift.detail.share"===b.name&&d.from&&(a.preventDefault(),location.href=c.href("gift.detail.orders",{id:d.id}))}),a.$on("$stateChangeSuccess",function(b,d,e,f,h){a.referer=c.href(f.name,h),document.body.scrollTop=document.documentElement.scrollTop=0,a.isAndroid&&g.config()}),g.config(),wx.error(function(a){h.add("warning",a.errMsg),console.log(a.errMsg)}),a.isAndroid=navigator.userAgent.match(/Android/i)}]),angular.module("clientApp").service("Alert",["$rootScope","$timeout",function(a,b){var c={};return a.alerts=[],c.add=function(d,e,f){a.alerts.push({type:d,msg:e,close:function(){c.closeAlert(this)}}),b(function(){c.closeAlert(this)},f||3e3)},c.closeAlert=function(b){c.closeAlertIdx(a.alerts.indexOf(b))},c.closeAlertIdx=function(b){a.alerts.splice(b,1)},c}]),angular.module("clientApp").directive("targetForAndroid",function(){return{restrict:"A",link:function(a,b,c){b.href;navigator.userAgent.match(/Android/i)&&b.attr("target","_self")}}}),angular.module("clientApp").filter("nl2br",["$sce",function(a){return function(b,c){var c=c||!0,d=c?"<br />":"<br>",b=(b+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+d+"$2");return a.trustAsHtml(b)}}]),angular.module("clientApp").directive("onLongPress",["$timeout","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){d.bind("touchstart",function(d){c.longPress=!0;var f=b(e.onLongPress);a(function(){c.longPress&&c.$apply(function(){f(c,{$event:d})})},600)}),d.bind("touchend",function(a){c.longPress=!1;var d=b(e.onLongPress);e.onTouchEnd&&c.$apply(function(){d(c,{$event:a})})})}}}]),angular.module("clientApp").directive("phone",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(a){var b=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])[0-9]{8}$/;return b.test(a)?(d.$setValidity("phone",!0),a):void d.$setValidity("phone",!1)})}}}),angular.module("clientApp").controller("GiftCtrl",["$scope","$rootScope",function(a,b){a.title="大礼包",b.bg2=!1,b.hideBar=!0}]).controller("GiftListCtrl",["$scope","$rootScope","$state","Gift",function(a,b,c,d){b.bg2=!1,a.apiCfg=window.SONGNI_CFG_API,a.gifts=new d,a.link=function(){var a=this.gift.id;c.go("gift.detail",{id:a})}}]).controller("GiftDetailCtrl",["$scope","$rootScope","$state","gift","Alert",function(a,b,c,d,e){a.appid=hostname[0],a.apiCfg=window.SONGNI_CFG_API,d.info.name,b.bg2=!1,a.gift=d,a.tab="gift-card",a.tabTap=function(b){a.tab=b},a.iWS=function(){c.go("gift.detail.record",{id:a.gift.id})};var f={imgUrl:"http://"+a.apiCfg.imgUri+d.info.cover};wx.ready(function(){wx.onMenuShareTimeline(f),wx.onMenuShareAppMessage(f),wx.onMenuShareQQ(f),wx.onMenuShareWeibo(f)})}]).controller("ShareModalCtrl",["$scope","$uibModalInstance",function(a,b){a.shareSrc="assets/v2/images/gift_share.png",a.isCloseModal=!1,a.$watch("isCloseModal",function(a){a&&b.close()})}]).controller("GiftShareCtrl",["$state","$scope","$rootScope","$stateParams","$uibModal","RestGiftOrder","$timeout",function(a,b,c,d,e,f,g){c.bg2=!1,b.preorders=[{sender:{info:{headimgurl:"/assets/images/user1.png",nickname:"李辛"}},receiver:{name:"刘静"}},{sender:{info:{headimgurl:"/assets/images/user2.png",nickname:"贺函"}},receiver:{name:"朱益达"}},{sender:{info:{headimgurl:"/assets/images/user3.png",nickname:"樊星"}},receiver:{name:"壮壮"}},{sender:{info:{headimgurl:"/assets/images/user4.png",nickname:"至尊宝"}},receiver:{name:"紫霞仙子"}}],f.one("list").one("s").getList("",{limit:6,gift:d.id}).then(function(a){a[1].length&&(b.orders=[],_.each(a[1],function(a){if(a.receivers[0].consignee)return b.orders.push(a)}))}),b.shareSrc="assets/v2/images/gift_share.png",b.shareStyle={width:"50%"},b.share=function(){c.modalInstance=e.open({templateUrl:"app/gift/gift.share.modal.html",scope:b})},b.$on("$viewContentLoaded",function(){marquee("marquee_content","#marquee_content",40,50)})}]).controller("GiftOrdersCtrl",["$scope","$rootScope","$stateParams","RestGiftOrder",function(a,b,c,d){b.bg2=!0,d.one("list").one("s").getList("",{limit:10,gift:c.id}).then(function(b){a.orders=b[1];var c=(a.orders.length,0);a.empty_line=[];for(var c=0;c<3-a.orders.length;c++)a.empty_line.push(c)})}]).controller("GiftListenCtrl",["$scope","$rootScope","$state","$stateParams","$timeout","$window","RestGiftOrder","order","Alert",function(a,b,c,d,e,f,g,h,i){a.innerHeight=f.innerHeight,a.innerWidth=f.innerWidth,c.is("order.detail.info"),b.bg2=!0,a.order=h,a.status={downloading:!1,downloaded:!1,play:!1,pause:!1,stop:!1},g.one(d.id).one("media").get({from:d.from}).then(function(b){console.warn(b),a.media=b}).catch(function(a){console.error(a)}),a.play=function(){wx.downloadVoice({serverId:a.media.media_id,isShowProgressTips:1,success:function(b){a.localId=b.localId,a.status.play=!0,a.status.pause=!1,wx.playVoice({localId:b.localId,success:function(b){a.$broadcast("timer-start")}}),a.pause=function(){wx.pauseVoice({localId:b.localId,success:function(b){a.$broadcast("timer-stop"),a.status.play=!1,a.status.pause=!0,a.$apply()}})},a.resume=function(){wx.playVoice({localId:b.localId,success:function(b){a.$broadcast("timer-start"),a.status.play=!0,a.status.pause=!1,a.$apply()}})},a.stop=function(){wx.stopVoice({localId:b.localId}),a.$broadcast("timer-stop"),a.$broadcast("timer-set-countdown",60)},a.$apply()}}),wx.ready(function(){wx.onVoicePlayEnd({success:function(b){a.$broadcast("timer-set-countdown",60),a.$broadcast("timer-stop"),a.status.play=!1,a.status.pause=!0,a.status.stop=!0,a.$apply()}})})},a.link=function(){c.go("gift.detail.share",{id:h.gift.id})}}]).controller("GiftQrcodeCtrl",["$scope","$rootScope",function(a,b){}]).controller("GiftAudioCtrl",["$scope","ngAudio",function(a,b){a.audio=b.load("http://media.songni.cc/2015-7/JBDl12DpTjFIZFg3OCl7-529Aaqj7UHsXVBsfEAW9Cxtgo8UekdyrVxT9FizKcW2.amr")}]).controller("GiftGuideCtrl",["$scope","$rootScope","$stateParams","$window",function(a,b,c,d){b.bg2=!0,a.selection=0,a.innerHeight=d.innerHeight,a.innerWidth=d.innerWidth,a.swipe=function(b){"up"===b&&a.selection<2&&a.selection++,"down"===b&&a.selection>0&&a.selection--,console.log(a.selection)},a.items=[0,1,2],a.selection=a.items[0]}]),angular.module("clientApp").config(["$stateProvider",function(a){a.state("gift",{abstract:!0,url:"/gift",template:"<ui-view/>"}).state("gift.list",{url:"/list",templateUrl:"app/gift/gift.lists.html",controller:"GiftListCtrl",css:[{href:"assets/v2/css/gzhh.css"},{href:"assets/v2/css/button.css"}]}).state("gift.my",{url:"/my",templateUrl:"app/gift/orderlist/order.list.html",controller:"GiftMyCtrl"}).state("gift.listen",{url:"/listen/:id?from",templateUrl:"app/gift/gift.listen.html",controller:"GiftListenCtrl",resolve:{order:["$stateParams","RestGiftOrder",function(a,b){return b.one(a.id).one("detail").get({from:a.from})}]}}).state("gift.audio",{url:"/audio",templateUrl:"app/gift/gift.audio.html",controller:"GiftAudioCtrl"}).state("gift.detail",{url:"/:id",templateUrl:"app/gift/gift.detail.html",controller:"GiftDetailCtrl",resolve:{gift:["$state","$stateParams","$location","RestGift","Wechat","Alert",function(a,b,c,d,e,f){var g=d.one(b.id).get(),h=window.SONGNI_CFG_API;return g.then(function(a){var b="http://"+c.host()+"/gift/"+a.id,d=a.info.name,g=a.info.lead,i=d,j="http://"+h.imgUri+a.info.cover;e.ready({url:b,title:d,desc:g,timeline:i,img:j}),a.status.online===!1&&f.add("danger","该礼物已经下线！")}),g}]},css:[{href:"assets/v2/css/gzhh.css"},{href:"assets/v2/css/button.css"}]}).state("gift.detail.one2one-record",{url:"/one2one-record",templateUrl:"app/gift/order/one2one/record.html",controller:"GiftRecordSingleCtrl",authenticate:!0,css:[{href:"assets/v2/css/sound-record.css"}]}).state("gift.detail.one2many-record",{url:"/one2many-record",templateUrl:"app/gift/order/one2many/record.html",controller:"GiftRecordMultiCtrl",authenticate:!0,css:[{href:"assets/v2/css/sound-record.css"},{href:"assets/v2/css/bootstrap.min.css",preload:!0}]}).state("gift.detail.share",{url:"/share?from",templateUrl:"app/gift/gift.share.html",controller:"GiftShareCtrl",css:[{href:"assets/v2/css/button.css"},{href:"assets/v2/css/guide.css"}]}).state("gift.detail.orders",{url:"/orders",templateUrl:"app/gift/gift.orders.html",controller:"GiftOrdersCtrl"}).state("gift.detail.qrcode",{url:"/qrcode",templateUrl:"app/gift/gift.qrcode.html",controller:"GiftShareCtrl",authenticate:!0}).state("order",{abstract:!0,url:"/order",template:"<ui-view/>"}).state("order.list",{url:"/list",templateUrl:"app/gift/orderlist/order.list.html",controller:"GiftMyCtrl",css:[{href:"assets/v2/css/gzhh.css"}]}).state("order.detail",{url:"/:id?from",template:"<ui-view/>",abstract:!0,resolve:{order:["$stateParams","RestGiftOrder",function(a,b){return b.one(a.id).one("detail").get({from:a.from})}]}}).state("order.detail.go",{url:"/go",controller:["$scope","$state","order",function(a,b,c){location.href=b.href("order.detail.info",{id:c.id})}]}).state("order.detail.one2one-address",{url:"/one2one-address",templateUrl:"app/gift/order/one2one/address.html",controller:"OrderAddressOne2OneCtrl",authenticate:!0,css:[{href:"assets/v2/css/gift-style.css"},{href:"assets/v2/css/button.css"}]}).state("order.detail.one2many-address",{url:"/one2many-address",templateUrl:"app/gift/order/one2many/address.html",controller:"OrderAddressOne2ManySendCtrl",authenticate:!0,css:[{href:"assets/v2/css/gift-style.css"},{href:"assets/v2/css/button.css"}]}).state("order.detail.guide",{url:"/guide",templateUrl:"app/gift/address.guide.html",controller:"OrderAddressCtrl",authenticate:!0}).state("order.detail.fillin",{url:"/fillin",templateUrl:"app/gift/order/gift.receive.status.html",controllerProvider:["order",function(a){return 1==a.capacity?"OrderAddressOne2OneCtrl":"OrderAddressOne2ManyRecevCtrl"}],authenticate:!0,css:[{href:"assets/v2/css/gift-style.css"},{href:"assets/v2/css/button.css"}]}).state("order.detail.fillin-one2many",{url:"/fillin-one2many",templateUrl:"app/gift/order/one2many/address.fillin.html",controller:"OrderAddressOne2ManyRecevAddrCtrl",css:[{href:"assets/v2/css/gift-style.css"},{href:"assets/v2/css/button.css"}]}).state("order.detail.info",{url:"/info",templateUrl:"app/gift/orderlist/order.info.html",controller:"GiftOrderDetailCtrl",authenticate:!0,css:[{href:"assets/v2/css/gzhh.css"}]}).state("order.detail.received",{url:"/received",templateUrl:"app/gift/orderlist/order.received.html",controller:"GiftReceivedCtrl",authenticate:!0,css:[{href:"assets/v2/css/gzhh.css"}]}).state("order.detail.shipped",{url:"/received",templateUrl:"app/gift/orderlist/order.shipped.html",controller:"GiftShippedCtrl",authenticate:!0,css:[{href:"assets/v2/css/gzhh.css"}]}).state("order.detail.listened",{url:"/listened",templateUrl:"app/gift/orderlist/order.listened.html",controller:"GiftListenedCtrl",authenticate:!0,css:[{href:"assets/v2/css/gzhh.css"}]}).state("order.detail.listen",{url:"/listen",templateUrl:"app/gift/gift.listen.html",controller:"GiftListenCtrl",authenticate:!0}).state("guide",{url:"/guide?id",templateUrl:"app/gift/gift.guide.html",controller:"GiftGuideCtrl"}).state("test",{url:"/test",templateUrl:"app/gift/test.html",controller:"TestCtrl"})}]),angular.module("clientApp").service("RestGift",["Restangular",function(a){return a.service("gift")}]).service("RestGiftOrder",["Restangular",function(a){return a.service("gift/order")}]).factory("Gift",["RestGift",function(a){var b=function(a){this.items=[],this.busy=!1,this.page=1,this.limit=10,this.params=a||{}};return b.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var b={page:this.page,limit:this.limit};this.params.tips&&(b.tips=!0),a.getList(b).then(function(a){for(var a=a[1],b=0;b<a.length;b++)this.items.push(a[b]);return a.length<this.limit?void(this.busy=!0):(this.page++,void(this.busy=!1))}.bind(this))}},b}]).factory("GiftOrder",["RestGiftOrder",function(a){var b=function(a){this.items=[],this.busy=!1,this.page=1,this.limit=10,this.count=0,this.params=a||{}};return b.prototype.nextPage=function(){this.busy||(this.busy=!0,this.params.page=this.page,this.params.limit=this.limit,a.one("list").one("s").getList("",this.params).then(function(a){this.count=a[0];for(var b=a[1],c=0;c<b.length;c++)this.items.push(b[c]);return b.length<this.limit?void(this.busy=!0):(this.page++,void(this.busy=!1))}.bind(this)))},b}]),angular.module("clientApp").controller("GiftRecordMultiCtrl",["$scope","$rootScope","$state","$cookies","$timeout","$uibModal","$window","Alert",function(a,b,c,d,e,f,g,h){a.innerHeight=g.innerHeight,b.bg2=!0,a.giftOrderCapacity=null,a.address={name:""},a.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0,isAlert:!0},a.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),wx.ready(function(){a.reduCapacity=function(){a.giftOrderCapacity&&a.giftOrderCapacity>2?a.giftOrderCapacity-=1:2==a.giftOrderCapacity&&h.add("warning","礼物份数至少是2份",2e3)},a.incrCapacity=function(){null==a.giftOrderCapacity?a.giftOrderCapacity=3:a.giftOrderCapacity>0&&(a.giftOrderCapacity+=1)},a.record=function(){a.$broadcast("timer-set-countdown",60),wx.startRecord({success:function(b){a.status.start=!0,a.status.stop=!1,a.status.record=!1,a.$broadcast("timer-start"),a.$apply()}})},a.stop=function(){wx.stopRecord({success:function(b){a.localId=b.localId,a.status.start=!1,a.status.record=!0,a.$broadcast("timer-stop"),a.$apply()}})},a.playVoice=function(){return a.$broadcast("timer-set-countdown",60),b.isAndroid&&a.status.isAlert?(f.open({templateUrl:"app/gift/gift.headphones.modal.html",controller:function(a,b){a.close=function(){b.dismiss("cancel")}},size:"sm"}),a.status.isAlert=!1,void a.$apply()):void wx.playVoice({localId:a.localId,success:function(){a.$broadcast("timer-start"),a.$apply()}})},a.rerecord=function(){a.$broadcast("timer-reset"),a.$broadcast("timer-set-countdown",60),a.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0}},a.save=function(){return a.giftOrderCapacity&&a.giftOrderCapacity<2?void h.add("warning","礼物份数至少是2份",2e3):void wx.uploadVoice({localId:a.localId,isShowProgressTips:1,success:function(b){a.serverId=b.serverId;var e=d.getObject("giftOrder")||{};e.serverId=b.serverId,e.name=a.address.name,e.capacity=a.giftOrderCapacity||2,e.type="one2many",d.putObject("giftOrder",e);var f=c.href("wepay",{module:"gift",type:e.type,action:"pay",block:"order",id:a.gift.id,showwxpaytitle:1});location.href=f}})},wx.onVoiceRecordEnd({complete:function(b){a.localId=b.localId,a.status.start=!1,a.status.record=!0,a.$apply()}}),wx.onVoicePlayEnd({success:function(b){a.$broadcast("timer-set-countdown",60),a.$broadcast("timer-stop"),a.$apply()}})})}]).controller("GiftPayOne2ManyCtrl",["$scope","$rootScope","$window","$state","$stateParams","$cookies","$timeout","RestGift","Alert","$css",function(a,b,c,d,e,f,g,h,i,j){j.bind([{href:"assets/v2/css/gzhh.css"},{href:"assets/v2/css/button.css"}],a);var k=(e.module,e.action,e.id);e.block;a.gift=h.one(k).get().$object,a.capacity=f.getObject("giftOrder").capacity,a.submiting=!1,a.wxPay=function(){var b=f.getObject("giftOrder");a.submiting=!0,g(function(){a.submiting=!1},5e3),h.one(k).one("preorder").post("",b).then(function(b){wx.chooseWXPay({timestamp:b.timestamp,nonceStr:b.nonceStr,package:b.package,signType:b.signType,paySign:b.paySign,success:function(a){var c=d.href(b.state,{id:b.id});location.href=c},cancel:function(b){a.submiting=!1},fail:function(b){a.submiting=!1,i.add("warning",b.errMsg)}})},function(a){i.add("danger",a.data.errmsg)})}}]).controller("OrderAddressOne2ManySendCtrl",["$scope","$rootScope","$state","$cookies","Wechat","$location","order","$uibModal",function(a,b,c,d,e,f,g,h){b.bg2=!1,b.hideBar=!0,a.order=g,a.address={},console.warn(b.user.plain()),a.user=b.user;var i="http://"+f.host()+c.href("order.detail.fillin",{id:g.id}),j=g.sender.name+"送给你一份礼物，快快收礼吧～",k="一种有心意更有新意的送礼方式",l="http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",m=j+","+k;e.ready({url:i,title:j,desc:k,timeline:m,img:l,state:"gift.detail.share",params:{id:a.order.gift.id}}),a.share=function(){b.modalInstance=h.open({templateUrl:"app/gift/gift.share.modal.html",controller:"ShareModalCtrl"})}}]).controller("OrderAddressOne2ManyRecevCtrl",["$scope","$rootScope","$state","$stateParams","$cookies","Wechat","RestWechat","$location","order","$uibModal",function(a,b,c,d,e,f,g,h,i,j){function k(){var b=0,c=1,d=10,e=100;a.isAvailble&&(b=c),a.isReceived&&(b+=d),a.isSender&&(b+=e),a.orderStatus=b}if(a.order=i,a.user=b.user,void 0===a.user&&g.one("client").get({referer:c.href("order.detail.fillin",d)}).then(function(a){window.location.href=a.link}),b.user.id===(i.sender.id||i.sender._id))return void c.go("order.detail.one2many-address");b.bg2=!1,b.hideBar=!0,a.address={},a.isReceived=!1,a.isAvailble=!0,a.isSender=!1,a.orderStatus=0,a.user.id===i.sender.id&&(a.isSender=!0),_.some(i.receivers,function(a){return a.userOpenId==b.user.openid})&&(a.isReceived=!0),a.orderReserved=i.receivers.length,a.orderSurplus=i.capacity-i.receivers.length,0===a.orderSurplus&&(a.isAvailble=!1),a.fill=function(){if(a.isAndroid){var b=c.href("order.detail.fillin-one2many",{id:a.order.id});location.href=b}else c.go("order.detail.fillin-one2many",{id:a.order.id})},k();var l="http://"+h.host()+c.href("order.detail.fillin",{id:i.id}),m=i.sender.name+"送给你一份礼物，快快收礼吧～",n="一种有心意更有新意的送礼方式",o="http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",p=m+","+n;f.ready({url:l,title:m,desc:n,timeline:p,img:o,state:"gift.detail.share",params:{id:a.order.gift.id}}),a.shareAsSender=function(){b.modalInstance=j.open({templateUrl:"app/gift/gift.share.modal.html",controller:"ShareModalCtrl"})}}]).controller("OrderAddressOne2ManyRecevAddrCtrl",["$scope","$rootScope","$state","$cookies","Wechat","$location","order","Alert","RestGiftOrder",function(a,b,c,d,e,f,g,h,i){b.bg2=!1,b.hideBar=!0,a.data={consignee:"",telephone:"",address:""},a.saveAddr=function(){_.some(a.data,function(b,c){return!a.data[c]})?h.add("warning","姓名，手机和地址为必填信息，不能为空",2e3):i.one(g.id).one("address").post("",a.data).then(function(a){switch(a.rc||console.error("saveAddr","没有response code !"),a.rc){case 1:h.add("success","你已经保存该礼物了",2e3);break;case 2:h.add("success","手慢了，没有礼物了",2e3);break;case 3:h.add("success","信息不全",2e3);break;case 4:location.href=c.href("gift.detail.share",{id:g.gift.id});break;default:h.add("warning","服务器走神了",2e3)}},function(a){alert("Get an err, "+JSON.stringify(a))})}}]),angular.module("clientApp").controller("GiftRecordSingleCtrl",["$scope","$rootScope","$state","$cookies","$timeout","$uibModal","$window","Alert",function(a,b,c,d,e,f,g,h){a.innerHeight=g.innerHeight,b.bg2=!0,a.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0,isAlert:!0},a.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),wx.ready(function(){a.record=function(){a.$broadcast("timer-set-countdown",60),wx.startRecord({success:function(b){a.status.start=!0,a.status.stop=!1,a.status.record=!1,a.$broadcast("timer-start"),a.$apply()}})},a.stop=function(){wx.stopRecord({success:function(b){a.localId=b.localId,a.status.start=!1,a.status.record=!0,a.$broadcast("timer-stop"),a.$apply()}})},a.playVoice=function(){return a.$broadcast("timer-set-countdown",60),b.isAndroid&&a.status.isAlert?(f.open({templateUrl:"app/gift/gift.headphones.modal.html",controller:function(a,b){a.close=function(){b.dismiss("cancel")}},size:"sm"}),a.status.isAlert=!1,void a.$apply()):void wx.playVoice({localId:a.localId,success:function(){a.$broadcast("timer-start"),a.$apply()}})},a.rerecord=function(){a.$broadcast("timer-reset"),a.$broadcast("timer-set-countdown",60),a.status={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0}},a.save=function(){return a.giftAddrForm.$invalid?(a.submitted=!0,!1):void wx.uploadVoice({localId:a.localId,isShowProgressTips:1,success:function(b){a.serverId=b.serverId;var e=d.getObject("giftOrder")||{};e.serverId=b.serverId,e.name=a.address.name,e.capacity=1,e.type="one2one",d.putObject("giftOrder",e);var f=c.href("wepay",{module:"gift",type:"one2one",action:"pay",block:"order",id:a.gift.id,showwxpaytitle:1});location.href=f}})},wx.onVoiceRecordEnd({complete:function(b){a.localId=b.localId,a.status.start=!1,a.status.record=!0,a.$apply()}}),wx.onVoicePlayEnd({success:function(b){a.$broadcast("timer-set-countdown",60),a.$broadcast("timer-stop"),a.$apply()}})})}]).controller("GiftPayOne2OneCtrl",["$scope","$rootScope","$window","$state","$stateParams","$cookies","$timeout","RestGift","Alert","$css",function(a,b,c,d,e,f,g,h,i,j){j.bind([{href:"assets/v2/css/gzhh.css"},{href:"assets/v2/css/button.css"}],a);var k=(e.module,e.action,e.id);a.gift=h.one(k).get().$object,a.capacity=f.getObject("giftOrder").capacity,a.submiting=!1,a.wxPay=function(){var b=f.getObject("giftOrder");a.submiting=!0,g(function(){a.submiting=!1},5e3),h.one(k).one("preorder").post("",b).then(function(b){wx.chooseWXPay({timestamp:b.timestamp,nonceStr:b.nonceStr,package:b.package,signType:b.signType,paySign:b.paySign,success:function(a){var c=d.href(b.state,{id:b.id});location.href=c},cancel:function(b){a.submiting=!1},fail:function(b){a.submiting=!1,i.add("warning",b.errMsg)}})},function(a){i.add("danger",a.data.errmsg)})}}]).controller("OrderAddressOne2OneCtrl",["$timeout","$scope","$rootScope","$location","$state","$uibModal","$window","RestGiftOrder","Wechat","order","Alert",function(a,b,c,d,e,f,g,h,i,j,k){1==j.capacity&&1==j.receivers.length?j.receivers[0].telephone&&(location.href=e.href("gift.detail.share",{id:j.gift.id})):k.add("warning","路径错误，此处为一送一！"),b.innerHeight=g.innerHeight,c.bg2=!1,b.giftAddrForm={},b.order=j,b.address={consignee:j.receivers[0]?j.receivers[0].name:"",address:null,telephone:null},b.saveAddr=function(){return b.giftAddrForm.$invalid?(b.submitted=!0,!1):void h.one(j.id).one("address").post("",b.address).then(function(a){switch(a.rc||console.error("saveAddr","没有response code !"),a.rc){case 1:k.add("success","你已经保存该礼物了",2e3);break;case 2:k.add("success","手慢了，没有礼物了",2e3);break;case 3:k.add("success","信息不全",2e3);break;case 4:location.href=e.href("gift.detail.share",{id:j.gift.id});break;default:k.add("warning","服务器走神了",2e3)}},function(a){alert("Get an err, "+JSON.stringify(a))})};var l="http://"+d.host()+e.href("order.detail.fillin",{id:j.id}),m=j.sender.name+"送给你一份礼物，快快收礼吧～",n="一种有心意更有新意的送礼方式",o="http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png",p=m+","+n;i.ready({url:l,title:m,desc:n,timeline:p,img:o,state:"gift.detail.share",params:{id:b.order.gift.id}}),b.share=function(){c.modalInstance=f.open({templateUrl:"app/gift/gift.share.modal.html",controller:"ShareModalCtrl"})}}]),angular.module("clientApp").controller("GiftMyCtrl",["$scope","$rootScope","$state","GiftOrder",function(a,b,c,d){a.apiCfg=window.SONGNI_CFG_API,b.bg2=!1,a.gifts=new d({my:!0}),a.link=function(a){c.go("order.detail.info",{id:a})}}]).controller("GiftOrderDetailCtrl",["$scope","$rootScope","$state","$stateParams","$timeout","$window","RestGiftOrder","order","Alert",function(a,b,c,d,e,f,g,h,i){a.innerHeight=f.innerHeight,a.innerWidth=f.innerWidth,a.apiCfg=window.SONGNI_CFG_API,b.bg2=!0,a.order=h,a.receiver=h.receivers[0];var j=0,k=0,l=0;angular.forEach(h.receivers,function(a){var b=a.status;b&&b.shipping&&!b.read&&l++,b&&b.shipping&&b.read&&k++,b&&b.shipping&&b.read||j++}),a.receive_num=j,a.listen_num=k,a.ship_num=l,a.link=function(){c.go("gift.detail.share",{id:h.gift.id})},a.received=function(){h.receivers.length&&c.go("order.detail.received",{id:h.id})},a.listened=function(){k>0&&c.go("order.detail.listened",{id:h.id})},a.shipped=function(){l>0&&c.go("order.detail.shipped",{id:h.id})}}]).controller("GiftShippedCtrl",["$scope","order",function(a,b){var c=[];angular.forEach(b.receivers,function(a){var b=a.status;b&&b.shipping&&!b.read&&c.push(a)}),a.receivers=c}]).controller("GiftListenedCtrl",["$scope","order",function(a,b){var c=[];angular.forEach(b.receivers,function(a){var b=a.status;b&&b.shipping&&b.read&&c.push(a)}),a.receivers=c}]).controller("GiftReceivedCtrl",["$scope","order",function(a,b){var c=[];angular.forEach(b.receivers,function(a){var b=a.status;console.warn(b&&b.shipping&&b.read),b&&b.shipping&&b.read||c.push(a)}),a.receivers=c}]),angular.module("clientApp").controller("LoginCtrl",["$scope","$rootScope","RestWechat",function(a,b,c){a.wechat=function(){c.one("client").get({referer:b.referer}).then(function(a){location.href=a.link})}}]).controller("ExpSetCtrl",["$cookieStore","$state","$stateParams","Alert",function(a,b,c,d){return c.token?(a.put("token",c.token),void(a.get("token")&&(location.href="/"))):void d.add("warning","请设置token")}]).controller("ExpCtrl",["$cookieStore","$stateParams","RestWechat",function(a,b,c){c.one("experience").get({uid:b.uid}).then(function(b){a.put("token",b.token),location.href="/"})}]),angular.module("clientApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl"}).state("exp",{url:"/exp?uid",templateUrl:"app/login/login.html",controller:"ExpCtrl"})}]),angular.module("clientApp").controller("MainCtrl",["$scope","$rootScope","gifts",function(a,b,c){b.title="大礼包列表",b.hideBar=!0,a.gifts=c}]),angular.module("clientApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/gift/gift.lists.html",controller:"GiftListCtrl",resolve:{gifts:["RestGift",function(a){return a.getList()}]},css:[{href:"assets/v2/css/gzhh.css"}]})}]),angular.module("clientApp").controller("WePayCtrl",["$scope","$rootScope","$window","$state","$stateParams","$timeout","$cookies","RestWechat","RestGift","Alert",function(a,b,c,d,e,f,g,h,i,j){b.title="微信支付";var k=e.module,l=e.action,m=e.id;switch(k){case"gift":switch(l){case"buy":a.gift=i.one(m).get().$object}}a.wxPay=function(){var a=function(a){wx.chooseWXPay({timestamp:a.timestamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success:function(b){var c=d.href(a.state,{id:a.id});location.href=c},cancel:function(a){},fail:function(a){j.add("warning",a.errMsg)}})},b=function(a){j.add("danger",a.data.errmsg)};switch(k){case"gift":switch(l){case"buy":var c=g.getObject("giftOrder");i.one(m).post("",c).then(a,b)}}}}]).controller("WcAppCtrl",["$scope",function(a){var b;a.try_to_open_app=function(){b=setTimeout("open_appstore()",300)}}]),angular.module("clientApp").config(["$stateProvider",function(a){a.state("wepay",{url:"/wepay/?id&showwxpaytitle&module&block&type&action",templateUrl:function(a){var b="app/"+a.module+"/"+a.block+"/"+a.type+"/"+a.action+".html";return b},authenticate:!0}).state("weapp",{url:"/weapp",templateUrl:"app/wechat/app.html",controller:"WcAppCtrl"})}]),angular.module("clientApp").service("RestWechat",["Restangular",function(a){return a.service("wechat")}]).service("Wechat",["$rootScope","$location","$document","$state","RestWechat","Alert",function(a,b,c,d,e,f){return{params:{url:b.absUrl(),title:c[0].title,desc:this.url,img:"http://static.ifindu.cn/91pintuan/images/logo.png"},config:function(){this.params.url=this.params.url||b.absUrl(),e.one("sign").one("jssdk").get({type:"jsapi",url:this.params.url}).then(function(b){a.signature=b.signature;var c={debug:debugWx,appId:b.appId,timestamp:b.timestamp,nonceStr:b.nonceStr,signature:b.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseWXPay","editAddress","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"]};wx.config(c)})},ready:function(b){b=b||{};var c=b.url?b.url:this.params.url,e=b.title?b.title:this.params.title,f=b.desc?b.desc:this.params.url,g=b.img?b.img:this.params.img,h={title:e,desc:f,link:c,imgUrl:g,success:function(c){a.modalInstance&&a.modalInstance.close(),b.state&&b.params&&d.go(b.state,b.params)},cancel:function(a){},fail:function(a){},complete:function(a){},trigger:function(a){}},i={title:b.timeline,link:c,imgUrl:g};wx.ready(function(){wx.onMenuShareTimeline(i),wx.onMenuShareAppMessage(h),wx.onMenuShareQQ(h),wx.onMenuShareWeibo(h)})}}}]),angular.module("clientApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{delete:function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("clientApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("app/directive/alert.html",'<uib-alert class="pt-alert alert-warning" ng-repeat="alert in alerts" type={{alert.type}} close=alert.close($index)>{{alert.msg}}</uib-alert>'),a.put("app/gift/address.guide.html",'<div>{{order.receiver.name}}:</div><p>我为你准备了一份惊喜,也有些话想对你说...</p><div class=pull-right>{{order.sender.name}}</div><div class=clearfix style=clear:both><a ui-sref=order.detail.fillin({id:order.id}) class="button button-action btn-green">填写地址</a></div>'),a.put("app/gift/gift.address.html","<div class=gift-address><div>222</div><table class=gift-top width=100%><tr><td align=center width=34%><img src={{merchant.pubno.head_img}} class=\"img-responsive img-circle\"></td><td valign=middle width=66%><div class=title>{{gift.info.name}}</div></td></tr></table><form class=form-horizontal name=giftAddrForm novalidate ng-submit=saveAddr()><div class=\"form-group details-input\" ng-class=\"{ 'gift-success': giftAddrForm['name'].$valid && submitted,\n                                      'has-error' : giftAddrForm['name'].$invalid && submitted }\"><label for=name class=\"col-xs-4 control-label\">送　　给</label><div class=col-xs-8><input name=name placeholder=\"{{giftAddrForm.name.$invalid && submitted?'昵称未填写':'TA的名字'}}\" ng-model=address.name ng-maxlength=20 required><p ng-show=\"giftAddrForm.name.$error.maxlength && submitted\" class=help-block>昵称字数太多.</p></div></div><div class=\"form-group details-input\" ng-class=\"{ 'gift-success': giftAddrForm['address'].$valid && submitted,\n                                      'has-error' : giftAddrForm['address'].$invalid && submitted }\"><label for=address class=\"col-xs-4 control-label\">配送地址</label><div class=col-xs-8><textarea type=address rows=2 name=address placeholder=\"{{giftAddrForm.address.$invalid && submitted?'配送地址未填写':'[送你]盒子飞奔到这里'}}\" ng-model=address.address class=msd-elastic required></textarea><p ng-show=giftAddrForm.address.$error.maxlength class=help-block>配送地址字数太多.</p></div></div><div class=\"form-group details-input\" ng-class=\"{ 'gift-success': giftAddrForm['telephone'].$valid && submitted,\n                                      'has-error' : giftAddrForm['telephone'].$invalid && submitted }\"><label for=telephone class=\"col-xs-4 control-label\">Ta的电话</label><div class=col-xs-8><input type=number name=telephone placeholder=\"{{giftAddrForm.telephone.$invalid && submitted?'手机号未填写':'TA的手机号'}}\" ng-model=address.telephone required phone><p ng-show=giftAddrForm.telephone.$error.phone class=help-block>不是有效的手机号码.</p></div></div><div class=\"form-group details-input\" ng-class=\"{'gift-success':giftAddrForm['name'].$valid&&giftAddrForm['address'].$valid&&giftAddrForm['telephone'].$valid}\"><label for=telephone class=\"col-xs-4 control-label\">对TA说</label><div class=\"col-xs-8 text-right\"><button type=submit style=\"border: 0;background-color: transparent;text-align:right;width:100%\"><i class=\"fa fa-microphone\"></i> <i class=\"fa fa-angle-right\"></i></button></div></div></form></div>"),
a.put("app/gift/gift.audio.html",'<div><button ng-click="audio.paused ? audio.play() : audio.pause()">暂停</button> <button ng-click=audio.restart()>Stop</button> <button ng-click="audio.muting = !audio.muting">Mute</button><label>时间</label><input class=form-control ng-model=audio.currentTime><label>音量</label><input class=form-control type=range min=0 max=1 step=0.01 ng-model=audio.volume></div>'),a.put("app/gift/gift.detail.html",'<div ui-view=""><div class=present-detail style=margin-top:15px><div class=present-detail-img><img ng-src="{{\'http://\' + apiCfg.imgUri + gift.info.cover}}" ng-if=gift.info.cover> <img ng-src=assets/v2/images/present_sent_demo.png ng-if=!gift.info.cover></div><div class=card-group><div class="card present-detail-summary"><p ng-bind=gift.info.name></p><article><p ng-bind=gift.info.lead></p></article><div class="separate-box present-summary-bottom"><div class=separate-left><span ng-bind=gift.info.price></span>元/份</div><div class="separate-right trade-status-green">已送出 <span ng-bind=gift.num.subpay>0</span>份</div><div style=clear:both></div></div></div></div><div style=height:50px></div><div class=gift-detail><hr><img src="assets/v2/images/word_gift_detail.png"><hr style="top: -1px;right:0"><div ng-bind-html=gift.info.detail></div></div><div style=height:60px></div></div><div class="bottom-btn double-col"><a ng-if="gift.num.stock != 0 && ((gift.num.stock - gift.num.subpay) <= 0)" class="button button-action" ng-disabled=true>已售罄</a><!-- type=1代表一送一 --> <a ng-if="!gift.num.stock || ((gift.num.stock - gift.num.subpay) > 0)" class="button button-action" ui-sref=gift.detail.one2one-record({id:gift.id})>送一人</a><!-- type=2代表一送多 --> <a ng-if="!gift.num.stock || ((gift.num.stock - gift.num.subpay) > 0)" class="button button-highlight" ui-sref=gift.detail.one2many-record({id:gift.id})>送多人</a></div></div>'),a.put("app/gift/gift.guide.html",'<div ng-swipe-up="swipe(\'up\')" ng-swipe-down="swipe(\'down\')" ng-style={height:innerHeight}><div class=animate-switch ng-switch on=selection><div class=animate-switch ng-switch-when=2><img src="assets/images/page3.png"></div><div class=animate-switch ng-switch-when=1><img src="assets/images/page2.png"></div><div class=animate-switch ng-switch-default><img src="assets/images/page1.png"></div></div></div><div ng-if=false><select ng-model=selection ng-options="item for item in items"></select><code>selection={{selection}}</code><hr><div class=switch-container ng-switch on=selection><div class=switch ng-switch-when=1>Settings Div</div><div class=switch ng-switch-when=2>Home Span</div><div class=switch ng-switch-default>default</div></div></div>'),a.put("app/gift/gift.headphones.modal.html",'<div style="margin:200px auto;width:70%"><img src=assets/images/headphones.png class="img-responsive center-block pull-right" ng-click=close()></div>'),a.put("app/gift/gift.listen.html",'<div class=listen-container><div class=empty-line></div><div class="message-block listen-message-block" style="padding: 0;min-height:{{innerHeight*94/100}}px"><div class=listen-greet><p>{{order.receiver.name}}:</p><img style=width:100%;margin-top:10px src="./assets/images/word_receive.png"><p style="text-align: right">{{order.sender.name}}</p><span style="color:#B5B5B6;font-size:15px;text-align: right;margin-top:-6px;display: block">{{order.time.add | date:\'yyyy年MM月dd日 hh:ss\'}}</span></div><div style="background-color:#F7F7F7;padding: 20px"><timer interval=1000 countdown=60 autostart=false><div class=v><div class=dialog-bg><div class=progress><div class=progress-active id=pro aria-valuenow={{countdown}} aria-valuemin=0 aria-valuemax=60 style="width: {{progressBar?progressBar:0}}%"></div></div></div><img class=head ng-src="{{order.sender.headimgurl.replace(\'/0\',\'/46\')}}"><label ng-bind="(60-countdown)+\'s\'"></label></div></timer><div id=play-button ng-if=media.media_id&&!localId style="width:28%;margin:20px auto 0"><img src=./assets/images/play.png ng-click=play() style=width:100%;margin:0></div><div ng-if=localId><div id=pause-button ng-click=pause() ng-if=status.play><img src="./assets/images/pause.png"></div><div id=play-button ng-click=resume() ng-if=status.pause><img src="./assets/images/play.png"></div></div><div id=finish-listen ng-if=status.stop ng-click=link()><img src=./assets/images/down.png alt="礼物详情"></div></div></div></div>'),a.put("app/gift/gift.lists.html",'<div class=present-list infinite-scroll=gifts.nextPage() infinite-scroll-disabled=gifts.busy infinite-scroll-distance=1><div class=present ng-repeat="gift in gifts.items" ng-click=link()><div class=present-img><img ng-src="{{\'http://\' + apiCfg.imgUri + gift.info.cover}}" ng-if=gift.info.cover> <img ng-src=assets/v2/images/rose_demo.png ng-if=!gift.info.cover><div class=present-summary><span class=present-summary-name ng-bind="gift.info.name | limitTo:10"></span> <span class=present-summary-price>RMB <span ng-bind=gift.info.price>0</span></span></div></div></div></div>'),a.put("app/gift/gift.my.html",'<div infinite-scroll=gifts.nextPage() infinite-scroll-disabled=gifts.busy infinite-scroll-distance=1><div class=trade-list ng-repeat="gift in gifts.items" ng-click=link()><div class="empty-canvas title"><b><span>送给</span> <span class=trade-name ng-bind=gift.receiver.name></span></b> <span class=trade-date ng-bind="gift.time.add | date:\'yyyy-MM-dd\'"></span></div><div class="empty-canvas trade-content"><img class=trade-img src=./assets/images/trade_demo.png><div class=content><span ng-bind=gift.gift.info.name></span><br><span>RMB {{gift.gift.info.price}}</span></div></div><div class="empty-canvas trade-content"><b><span class=order-state ng-if=!gift.status.read ng-bind="gift.status.shipping?\'已发货\':\'未发货\'"></span> <span class=order-state ng-if=gift.status.read>已收货</span></b> <span class=num ng-if=gift.express>快递单号:<span style=color:#FFC125 ng-bind=gift.express></span></span></div></div></div>'),a.put("app/gift/gift.orders.html",'<div id=last-container><div class=go-end-page><div class=go-header><img src="./assets/images/unknown.png"><br><img style="width:55%;margin-top: 12px" src="./assets/images/word_guide.png"></div><a class="button button-action" ui-sref=gift.detail({id:gift.id}) target=_blank>让礼物帮你说</a><h4 class=go-head-message>已有<span ng-bind=gift.num.pay>0</span>个朋友在用这个特殊礼物表达心声</h4><div class=message-block id=marquee><div id=marquee_content><ul class=show-box><li ng-repeat="order in orders"><img src="{{order.sender.info.headimgurl.replace(\'/0\',\'/46\')}}"> <span>{{order.sender.info.nickname}}</span> 对 <span>{{order.receiver.name}}</span> 说 <span>...</span></li><li ng-repeat="line in empty_line">&nbsp;</li></ul></div><div id=em></div></div><p class=go-footer><img src="./assets/images/word_guide_footer.png"></p></div><div style=background-color:#5D5D5D;min-height:70px></div></div><script>marquee("marquee","marquee_content","em",60);</script>'),a.put("app/gift/gift.qrcode.html",'<div class="col-md-12 code-margin"><div class=code-you>亲爱的{{order.receiver.name}}:</div><br><div class="text-center code-logo-wai"><div class="text-center code-logo-font">微信扫一扫,听Ta对你说</div><div class=code-logo><h2>此处是二维码</h2><br><br></div></div><div class=text-center><div class="text-right code-me"><dl><dd>{{order.sender.info.nickname}}</dd><dd>{{order.time.add | amCalendar}}</dd></dl></div></div></div>'),a.put("app/gift/gift.share.html",'<div class="section section-last"><div class=show-box><img class=i src="assets/v2/images/i.png"><div class=white-box>已有<span>{{gift.num.pay}}</span>人用这份礼物送出了祝福</div><div class=marquee><ul class=scroll-box id=marquee_content><li ng-repeat="order in orders"><img src="{{order.sender.info.headimgurl.replace(\'/0\',\'/46\')}}"> <span><span>{{order.sender.info.nickname}}</span> 祝福 <span>{{order.receivers[0].consignee}}</span></span></li><li ng-repeat="order in preorders" ng-if="gift.num.pay<4"><img src="{{order.sender.info.headimgurl.replace(\'/0\',\'/46\')}}"> <span><span>{{order.sender.info.nickname}}</span> 祝福<span>{{order.receivers[0].consignee}}</span></span></li></ul></div></div><!--/show-box--><div class=guide-bottom><div class="bottom-btn double-col"><a class="button button-action" ui-sref=gift.list>我也要送</a><!--<a class="button button-highlight" ng-click="share()">分享</a>--></div></div></div>'),a.put("app/gift/gift.share.modal.html",'<img ng-src={{shareSrc}} src=assets/images/share.png ng-style=shareStyle class="img-responsive pull-right share-guide">'),a.put("app/gift/gift.voice.html",'<div class=tape-margin><div class="text-center tape-logo-wai"><div class=tape-logo ng-bind-html="gift.info.poetry | nl2br"></div></div><div class="text-center tape-down"><div class=tape-bar><timer interval=1000 countdown=60 autostart=false><div class="progress gift-progress"><div class="progress-bar progress-bar-danger progress-bar-striped {{displayProgressActive}}" role=progressbar aria-valuenow={{countdown}} aria-valuemin=0 aria-valuemax=60 style="width: {{progressBar}}%"></div></div><div class="center gift-second">{{countdown === 60?\'&nbsp;\':(60-countdown)+\'S\'}}</div></timer></div><div class=tape-ok><dl ng-if=status.stop><dd class=tape-dd-big-star><img src=assets/images/record.png ng-click=record() class=gift-voice-big></dd><dd class=tape-dd-big-font>读诗/表白</dd></dl><dl ng-if=status.start><dd class=tape-dd-big-star><img src=assets/images/stop.png ng-click=stop() class=gift-voice-big></dd><dd class=tape-dd-big-font>结束录音</dd></dl><div class=tape-poa-btn ng-if=status.record><dl class=tape-poa-left><dd class=tape-dd-small><img src=assets/images/play.png ng-click=playVoice() class=gift-voice-small></dd><dd class=tape-dd-big-font>播放</dd></dl><dl class="tape-next tape-poa-left"><dd class=tape-dd-big-over><img src=assets/images/next.png ng-click=save() class=gift-voice-big></dd><dd class=tape-dd-big-font>下一步</dd></dl><dl class=tape-poa-left><dd class=tape-dd-small><img src=assets/images/rerecord.png ng-click=record() class=gift-voice-small></dd><dd class=tape-dd-big-font>重录</dd></dl></div></div></div></div>'),a.put("app/gift/order.listen.html",""),a.put("app/gift/order/gift.receive.status.html",'<!-- 送一个人 --><div class=address-from-friend ng-if="order.capacity == 1"><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"> <img class=head-top ng-src="{{order.sender.info.headimgurl}}"></div><div class=content><p class="center-mini-text fill-out-describe">{{order.sender.name}}用心为你准备了一份礼物,写下你的收货地址,礼物和惊喜将送到这里~</p><form name=giftAddrForm novalidate ng-submit=saveAddr()><input name=consignee placeholder="{{giftAddrForm.consignee.$invalid && submitted?\'姓名未填写\':\' 姓名:\'}}" ng-model=address.consignee ng-maxlength=20 required class=form-text ng-class="{\'error\':giftAddrForm.consignee.$invalid && submitted}"><p ng-show="giftAddrForm.consignee.$error.maxlength && submitted" class=help-block>* 收货人字数太多.</p><input type=tel name=telephone placeholder="{{giftAddrForm.telephone.$invalid && submitted?\'手机号未填写\':\'手机号码\'}}" ng-model=address.telephone required phone class=form-text ng-class="{\'error\':giftAddrForm.telephone.$invalid && submitted}"><p ng-show="giftAddrForm.telephone.$error.phone && submitted" class=help-block>* 不是有效的手机号码.</p><textarea rows=4 name=address placeholder="{{giftAddrForm.address.$invalid && submitted?\'收货地址未填写\':\'填写详细收货地址，例如：街道名称/门牌号/楼层/房间号等信息\'}}" ng-model=address.address ng-maxlength=300 required class="form-textarea address" ng-class="{\'error\':giftAddrForm.address.$invalid && submitted}"></textarea><p ng-show=giftAddrForm.address.$error.maxlength class=help-block>* 配送地址字数太多.</p><div class=submit-btn><button type=submit class="button button-action">提交</button></div></form></div><!--content--></div></div><!-- 送多个人 --><div ng-if="order.capacity > 1"><!-- 收礼者:还没有收礼，而且有余 --><div class=receive-present ng-if="orderStatus == 1"><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"> <img class=head-top ng-src="{{order.sender.info.headimgurl}}"></div><div class=content><br><p class=center-name>{{order.sender.info.nickname}}</p><p class=receive-present-text>为你准备了一份礼物,不止礼物还有惊喜哟,点此收下心意吧~</p><p class=head-send-status>{{orderReserved}}人已领取礼物 <span class=left-count>还有<b>{{orderSurplus}}</b>份</span></p></div><!--content--><div class=receive-btn><a href=# class="button button-action" ng-click=fill()>收礼</a></div></div></div><!-- 收礼者：已经收礼品了  --><div class=open-link-end ng-if="(orderStatus == 10) || (orderStatus == 11)"><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"> <img class=head-top ng-src="{{order.sender.info.headimgurl}}"></div><div class=content><br><p class=center-name>{{order.sender.info.nickname}}</p><p class=receive-present-text>为你准备了一份礼物,不止礼物还有惊喜哟,点此收下心意吧~</p><p class=head-send-status>{{orderReserved}}人已领取礼物 <span class=left-count>还有<b>{{orderSurplus}}</b>份</span></p></div><!--content--><div class=receive-btn><a href="javascript: void(0)" class="button button-done">已收礼</a></div></div><div class=footer-btn><a ui-sref=gift.list class=button>我也要送礼</a></div></div><!-- 送礼人:打开链接，还有礼物 --><div class=open-link ng-if="(orderStatus == 101) || (orderStatus == 111)"><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"><p class=head-send-status>{{order.capacity - orderSurplus}}人已领取礼物 <span class=left-count>还有<b>{{orderSurplus}}</b>份</span></p></div><div class=content><div class=head-center><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}</span></div><p class=send-gift-text>已有{{order.capacity - orderSurplus}}人领取你的礼物,还有{{orderSurplus}}份礼物,继续送礼吧~</p><div style=height:20px></div><a ng-click=shareAsSender() id=start-send-present class="button button-action">继续发礼物</a></div><!--content--></div></div><!-- 送礼人:打开链接，已经送光了 --><div class=open-link-end ng-if="(orderStatus == 100) || (orderStatus == 110)"><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"><div style=height:46px></div></div><div class=content><div class=head-center><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}</span></div><p class=send-gift-text>{{order.capacity}}份礼物已全部送出!</p><div style=height:20px></div><a href="javascript: void(0)" class="button button-done">礼物已被抢光</a></div><!--content--></div><div class=footer-btn><a ui-sref=gift.list class=button>继续送礼</a></div></div><!-- 收礼人:还没有收礼，但是礼物已经没有了 --><div class=open-link-end ng-if="orderStatus == 0"><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"> <img class=head-top ng-src="{{order.sender.info.headimgurl}}"></div><div class=content><br><p class=center-name>{{order.sender.info.nickname}}</p><p class=receive-present-text>为你准备了一份礼物,不止礼物还有惊喜哟,点此收下心意吧~</p><p class=head-send-status>{{order.capacity}}人已领取礼物 <span class=left-count>还有<b>0</b>份</span></p></div><!--content--><div class=receive-btn><a href="javascript: void(0)" style="background: rgba(0, 0, 0, 0.4) !important" class="button button-action">手慢了,礼物被抢完了</a></div></div><div class=footer-btn><a ui-sref=gift.list class=button>我也要送礼</a></div></div></div>'),a.put("app/gift/order/one2many/address.fillin.html",'<div class=address-from-friend><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"><br><p class=center-mini-text>写下你的收货地址，礼物将送到这里； 除了礼物，送礼人还对你说了一段话，收到礼物扫描语音码即可听到～</p></div><div class=content><input ng-model=data.consignee class=form-text name=name required placeholder="您的姓名"> <input type=tel ng-model=data.telephone class=form-text name=tel required placeholder="手机号码"><textarea ng-model=data.address class="form-textarea address" name=address required rows=6 placeholder="填写详细收货地址 如:街道名/门牌号/楼层/房间号等信息"></textarea><div class=submit-btn><button type=submit ng-click=saveAddr() class="button button-action">提交</button></div></div><!--content--></div></div>'),a.put("app/gift/order/one2many/address.html",'<div class=pay-success-several><div class=container-status><div class=head><img class=icon-img src="assets/v2/images/i.png"><p ng-if="!order.receivers || !order.receivers.length" class=head-title-green>{{order.capacity}}<small>份礼物已备好</small></p><div ng-if="order.receivers && order.receivers.length" class=head-title-green><p class=head-send-status>{{ order.receivers.length }}人已领取礼物 <span class=left-count>还有<b>{{ order.capacity - order.receivers.length }}</b>份</span></p></div></div><div class=content><div class=head-center><img ng-src="{{order.sender.info.headimgurl}}"><br><span>{{order.sender.info.nickname}}</span></div><p class=send-gift-text>您的{{order.capacity}}份礼物已经购买成功,发至微信好友/微信群/朋友圈,开始送礼物吧~</p><a href=# id=start-send-present ng-click=share() class="button button-action">{{ order.receivers && order.receivers.length && order.receivers.length === order.capacity ? \'礼物已经抢光了\' : order.receivers && order.receivers.length ? \'继续送礼\' : \'开始送礼物\' }}</a></div><!--content--></div></div>'),a.put("app/gift/order/one2many/pay.html",'<div style=height:8px></div><div class=empty-canvas ng-controller=GiftPayOne2ManyCtrl><div class=pay><div class=card-group><div class="card present-detail-summary"><p><b>{{gift.info.name}}</b></p><article>{{gift.info.lead}}</article><div class="separate-box pay-bottom"><div class=separate-left>{{gift.info.price}} 元/份</div><div class=separate-right><span>数量:</span>{{capacity}}份</div><div style=clear:both></div></div></div></div><div class="card-group total-pay"><div class=card><div class=separate-box><div class=separate-left>总 计</div><div class=separate-right>{{ gift.info.price * capacity | currency }}</div><div style=clear:both></div></div></div></div><!--/total-pay--><div class=pay-now><a class="button button-action btn-green" ng-click=wxPay() ng-disabled=submiting ng-bind="submiting?\'支付中...\':\'支付\'"></a></div></div></div>'),a.put("app/gift/order/one2many/record.html",'<div class=sound-record ng-style="{height:innerHeight-54+\'px\'}"><div class=to-who><img src="assets/v2/images/gift_copies.png"><br><div class=to-who-count><div class=input-group><span class=input-group-btn><button type=button ng-click=reduCapacity() class="btn btn-success btn-number"><span class="glyphicon glyphicon-minus"></span></button></span> <input type=number ng-model=giftOrderCapacity pattern=\\d* class="form-control input-number" style="text-align: center;border-bottom: 1px dashed #8FC31F;border-top: 1px dashed #8FC31F" placeholder="2 份" min=2> <span class=input-group-btn><button type=button ng-click=incrCapacity() class="btn btn-success btn-number" data-type=plus><span class="glyphicon glyphicon-plus"></span></button></span></div></div></div><div class=voice-box><div class=voice-process><img src="assets/v2/images/blessing.png"><timer interval=1000 countdown=60 autostart=false><div class=progress><div class=progress-active id=pro aria-valuenow={{countdown}} aria-valuemin=0 aria-valuemax=60 style="width: {{progressBar?progressBar:0}}%"></div></div><span class=label id=second style="text-align:right; display: block">{{countdown === 60?\'&nbsp;\':(60-countdown)+\'S\'}}</span></timer></div><!-- 开始录音 --><div id=record-before ng-if=status.stop><img src=assets/v2/images/record.png ng-click="record()"><br><span class=hint>点击开始录音</span></div><!-- 结束录音 --><div id=record-before ng-if=status.start><img src=assets/v2/images/re_stop.png ng-click="stop()"><br><span class=hint>结束录音</span></div><!-- 调试录音 --><div id=record-after ng-if=status.record><div class=left-button ng-click=playVoice()><img src="assets/v2/images/play_red.png"><br><label class=hint>播放</label></div><div class=left-button ng-click=rerecord()><img src="assets/v2/images/re_record.png"><br><label class=hint>重录</label></div><div class=right-button ng-click=save()><img src="assets/v2/images/next_step.png"><br><label class=hint>下一步</label></div></div></div></div>'),a.put("app/gift/order/one2one/address.html",'<div class=head><img class=icon-img src=assets/v2/images/i.png><div style=height:24px></div><p class=center-mini-text>支付成功,请填写收货人信息</p></div><div class="message-block content"><form class=form-horizontal name=giftAddrForm novalidate ng-submit=saveAddr()><input class="input-msg form-text" name=consignee placeholder=收货人姓名 ng-model=address.consignee ng-maxlength=20 required><p ng-show="giftAddrForm.consignee.$error.maxlength && submitted" class=help-block>* 收货人字数太多.</p><input class="input-msg form-text" type=tel name=telephone placeholder=收货人电话 ng-model=address.telephone required phone><p ng-show="giftAddrForm.telephone.$invalid && submitted" class=help-block>* 请输入有效的手机号码.</p><textarea rows=2 name=address style=height:6em class="input-msg form-textarea" placeholder=填写详细收货地址，例如：街道名称/门牌号/楼层/房间号等信息 ng-model=address.address ng-maxlength=500 required></textarea><p ng-show="giftAddrForm.address.$error.required && submitted" class=help-block>* 请输入收货人的详细地址.</p><p ng-show="giftAddrForm.address.$error.maxlength && submitted" class=help-block>* 配送地址字数太多.</p><button type=submit class="button button-action btn-green" style="margin-top: 8px">完成</button></form><button class="button button-highlight btn-yellow" style="margin-top: 8px" ng-click=share()>不知道?发给好友填写</button></div>'),a.put("app/gift/order/one2one/pay.html",'<div style=height:8px></div><div class=empty-canvas ng-controller=GiftPayOne2OneCtrl><div class=pay><div class=card-group><div class="card present-detail-summary"><p><b>{{gift.info.name}}</b></p><article>{{gift.info.lead}}</article><div class="separate-box pay-bottom"><div class=separate-left>{{gift.info.price}} 元/份</div><div class=separate-right><span>数量:</span>1份</div><div style=clear:both></div></div></div></div><div class="card-group total-pay"><div class=card><div class=separate-box><div class=separate-left>总 计</div><div class=separate-right>{{ gift.info.price | currency }}</div><div style=clear:both></div></div></div></div><!--/total-pay--><div class=pay-now><a class="button button-action btn-green" ng-click=wxPay() ng-disabled=submiting ng-bind="submiting?\'支付中...\':\'支付\'"></a></div></div></div>'),a.put("app/gift/order/one2one/record.html",'<form name=giftAddrForm novalidate><div class=sound-record ng-style="{height:innerHeight-54+\'px\'}"><div class=to-who><img src="assets/v2/images/word_send_to.png"><br><input name=address.name placeholder="{{giftAddrForm[\'address.name\'].$invalid && submitted?\'昵称未填写\':\'Ta的名字\'}}" ng-model=address.name ng-maxlength=20 required class=input-msg ng-class="{\'error\':giftAddrForm[\'address.name\'].$invalid && submitted}"><p ng-show="giftAddrForm.name.$error.maxlength && submitted" class=help-block>昵称字数太多.</p></div><div class=voice-box><div class=voice-process><img src="assets/v2/images/word_say_to.png"><timer interval=1000 countdown=60 autostart=false><div class=progress><div class=progress-active id=pro aria-valuenow={{countdown}} aria-valuemin=0 aria-valuemax=60 style="width: {{progressBar?progressBar:0}}%"></div></div><span class=label id=second style="text-align:right; display: block">{{countdown === 60?\'&nbsp;\':(60-countdown)+\'S\'}}</span></timer></div><!-- 开始录音 --><div id=record-before ng-if=status.stop><img src=assets/v2/images/record.png ng-click="record()"><br><span class=hint>点击开始录音</span></div><!-- 结束录音 --><div id=record-before ng-if=status.start><img src=assets/v2/images/re_stop.png ng-click="stop()"><br><span class=hint>结束录音</span></div><!-- 调试录音 --><div id=record-after ng-if=status.record><div class=left-button ng-click=playVoice()><img src="assets/v2/images/play_red.png"><br><label class=hint>播放</label></div><div class=left-button ng-click=rerecord()><img src="assets/v2/images/re_record.png"><br><label class=hint>重录</label></div><div class=right-button ng-click=save()><img src="assets/v2/images/next_step.png"><br><label class=hint>下一步</label></div></div></div></div></form>'),a.put("app/gift/orderlist/order.info.html",'<!-- 单人订单 --><div class=present-sent-detail ng-show="order.capacity == 1"><div class=card-group><div class="card detail-title"><img ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}" class=od-trade-img ng-if=order.gift.info.cover> <img src=assets/v2/images/present_sent_demo.png class=od-trade-img ng-if="!order.gift.info.cover"><div class=detail-title-content><p>{{order.gift.info.name}}<br>{{order.gift.info.price}}元/份</p></div></div></div><div class=card-group><ul class="card detail-content"><li><span class=name>数&emsp;&emsp;量:</span><p class=value>1份</p></li><li><span class=name>总&emsp;&emsp;价:</span><p class=value><b style=font-size:20px>{{order.gift.info.price * order.capacity}}</b>元</p></li><li><span class=name>下单时间:</span><p class=value>{{order.time.add | date:\'yyyy-MM-dd HH:MM:ss\'}}</p></li><li ng-if=order.express><span class=name>快递单号:</span><p class=value style=font-size:16px;color:#8FC31F ng-bind=order.receivers[0].express.no></p></li></ul></div><!-- #TODO leave order stauts to https://github.com/arrking/songni/issues/74 --><div class=card-group><ul class="card detail-status"><li><span class=name>礼物状态</span><p></p></li><li ng-if=receiver.status.read><span class=name>{{receiver.status.read_date | date:\'yyyy-MM-dd HH:MM:ss\'}}</span><p class=status-listen>已收听&emsp;</p></li><li ng-if=receiver.status.shipping><span class=name>{{receiver.status.shipping_date | date:\'yyyy-MM-dd HH:MM:ss\'}}</span><p class=status-deliver>已发货&emsp;</p></li></ul><div style=height:50px></div></div></div><!-- 多人订单 --><div class=present-sent-detail ng-show="order.capacity > 1"><div class=card-group><div class="card detail-title"><img ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}" class=od-trade-img ng-if=order.gift.info.cover> <img src=assets/v2/images/present_sent_demo.png class=od-trade-img ng-if="!order.gift.info.cover"><div class=detail-title-content><p>{{order.gift.info.name}}<br>{{order.gift.info.price}}元/份</p></div></div></div><div class=card-group><ul class="card detail-content"><li><span class=name>数&emsp;&emsp;量:</span><p class=value>{{order.capacity}}份</p></li><li><span class=name>总&emsp;&emsp;价:</span><p class=value><b style=font-size:20px>{{order.gift.info.price * order.capacity}}</b>元</p></li><li><span class=name>下单时间:</span><p class=value>{{order.time.add | date:\'yyyy-MM-dd HH:MM:ss\'}}</p></li></ul></div><div class=card-group><!-- #TODO leave order stauts to https://github.com/arrking/songni/issues/74 --><ul class="card detail-status"><li><span class=name>礼物状态:</span></li><li><div class="card-well trade-status-yellow" ng-click=listened()>{{listen_num}} 人已签收<span>&gt;</span></div></li><li><div class="card-well trade-status" ng-click=shipped()>{{ship_num}} 人待发货<span>&gt;</span></div></li><li><div class="card-well trade-status-green" ng-click=received()>{{receive_num}} 人已领取礼物<span>&gt;</span></div></li></ul></div></div>'),a.put("app/gift/orderlist/order.list.html",'<div infinite-scroll=gifts.nextPage() infinite-scroll-disabled=gifts.busy infinite-scroll-distance=1><div ng-repeat="order in gifts.items" ng-click=link(order.id) style=margin-top:15px><!-- 多人订单 --><div class=card-group ng-show="order.capacity > 1"><div class=card><span class=trade-status-green>{{order.receivers.length}}人已领取</span> <span class=trade-date ng-bind="order.time.add | date:\'yyyy-MM-dd\'"></span></div><hr class=card-hr><div class="card trade-content"><img class=trade-img src=assets/v2/images/present_sent_demo.png ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}"><div class=order-content><span ng-bind=order.gift.info.name></span><br><span>数量：{{order.capacity}}份</span><br><span>总计：{{order.gift.info.price * order.capacity}}元</span></div></div></div><!-- 单人订单 --><div class=card-group ng-show="order.capacity ==1 "><div class=card><b><span>送给</span> <span class=trade-name>{{order.receivers[0].name}}</span></b> <span class=trade-date ng-bind="order.time.add | date:\'yyyy-MM-dd\'"></span></div><hr class=card-hr><div class="card trade-content"><img class=trade-img src=assets/v2/images/present_sent_demo.png ng-src="{{\'http://\' + apiCfg.imgUri + order.gift.info.cover}}"><div class=content><span ng-bind=order.gift.info.name></span><br><span>RMB {{order.gift.info.price}}</span></div></div><hr class=card-hr><div class="card trade-content"><b><span class=order-state ng-if=!order.status.read ng-bind="order.status.shipping?\'已发货\':\'未发货\'"></span> <span class=order-state ng-if=order.status.read>已收听</span></b> <span class=num ng-if=order.express>快递单号:<span style=color:#FFC125 ng-bind=order.receivers[0].express.no></span></span></div></div></div></div>'),a.put("app/gift/orderlist/order.listened.html",'<div class=present_received_list><div class=card-group><div class=card ng-repeat="receiver in receivers"><div class=present-rl-item><img src=http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png ng-src="{{receiver.headimgurl}}"><div class=ite-summary><div class=clear></div><div class=ite-content><span class=ite-name>{{receiver.consignee}}</span> <span class=ite-status><span>{{receiver.status.read_date|date:\'MM.dd HH:mm\'}}</span> <span class=trade-status-green>已收听</span></span></div></div></div><hr></div></div></div>'),a.put("app/gift/orderlist/order.received.html",'<div class=present_received_list><div class=card-group><div class=card ng-repeat="receiver in receivers"><div class=present-rl-item><img src=http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png ng-src="{{receiver.headimgurl}}"><div class=ite-summary><div class=clear></div><div class=ite-content><span class=ite-name>{{receiver.consignee}}</span> <span class=ite-status><span>{{receiver.fillinDate|date:\'MM.dd HH:mm\'}}</span> <span class=trade-status-green>已领取</span></span></div></div></div><hr></div></div></div>'),a.put("app/gift/orderlist/order.shipped.html",'<div class=present_received_list><div class=card-group><div class=card ng-repeat="receiver in receivers"><div class=present-rl-item><img src=http://7xkeqi.com1.z0.glb.clouddn.com/songni%2F%E5%9B%BE%E7%89%87-%E4%BA%AB%E9%93%BE%E6%8E%A5.png ng-src="{{receiver.headimgurl}}"><div class=ite-summary><div class=clear></div><div class=ite-content><span class=ite-name>{{receiver.consignee}}</span> <span class=ite-status><span>{{receiver.status.shipping_date|date:\'MM.dd HH:mm\'}}</span> <span class=trade-status-green>已发货</span></span></div></div></div><hr></div></div></div>'),a.put("app/gift/test.html",'<h3>长按列表</h3><p ng-repeat="item in list" on-long-press=itemOnLongPress(item) on-touch-end=itemOnTouchEnd(item)>[{{ item }}]</p><h3>长按结果</h3><p ng-repeat="msg in messages">{{msg}}</p>'),a.put("app/login/login.html",'<div class=text-center style=margin-top:100px><img src=assets/images/icon48_wx_button.png ng-click="wechat()"></div>'),a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><header class=hero-unit id=banner><div class=container><h1>\'Allo, \'Allo!</h1><p class=lead>Kick-start your next web app with Angular Fullstack</p><img src=assets/images/yeoman.png alt="I\'m Yeoman"></div></header><div class=container><div class=row><div class=col-lg-12><h1 class=page-header>Features:</h1><ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="thing in awesomeThings"><li><a href=# tooltip={{thing.info}}>{{thing.name}}</a></li></ul></div></div></div><footer class=footer><div class=container><p>Angular Fullstack v2.0.13 | <a href=https://twitter.com/tyhenkel>@tyhenkel</a> | <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a></p></div></footer>'),a.put("app/wechat/app.html","<a href=wechat: ng-click=try_to_open_app()>App name</a>"),a.put("app/wechat/pay.html",'<div class=text-center><h3 style=margin-top:100px;color:#595757;font-size:18px>支付连接中</h3><div class=loading2><div></div><div></div><div></div><div></div></div></div><div class="paydiv text-center" style=clear:both><p class=ppay>15秒后未出现支付页面，请点击刷新</p><button class="reflash btn btn-primary btn-lg" ng-click=reflash()>刷新</button><div></div></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),
a.put("components/navbar/bottom.html",""),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>client</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);